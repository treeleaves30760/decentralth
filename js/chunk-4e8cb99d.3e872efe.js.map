{"version":3,"sources":["webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/through2/through2.js","webpack:///./node_modules/@toruslabs/torus.js/dist/torusUtils.esm.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@toruslabs/torus-embed/node_modules/eth-rpc-errors/dist/utils.js","webpack:///./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./node_modules/core-js/internals/array-from.js","webpack:///./node_modules/core-js/modules/es.map.js","webpack:///./node_modules/core-js/internals/object-is-extensible.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/core-js/internals/collection-strong.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/fast-deep-equal/index.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/core-js/internals/collection.js","webpack:///./node_modules/@toruslabs/torus-embed/node_modules/eth-rpc-errors/dist/errors.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@metamask/obs-store/dist/ObservableStore.js","webpack:///./node_modules/@toruslabs/fetch-node-details/dist/fetchNodeDetails.esm.js","webpack:///./node_modules/@toruslabs/torus-embed/node_modules/is-stream/index.js","webpack:///./node_modules/@toruslabs/torus-embed/dist/torus.esm.js","webpack:///./node_modules/@web3auth/torus-evm-adapter/dist/torusEvmAdapter.esm.js","webpack:///./node_modules/@toruslabs/torus-embed/node_modules/eth-rpc-errors/dist/index.js","webpack:///./node_modules/@metamask/obs-store/dist/index.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack:///./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/core-js/modules/es.array.from.js","webpack:///./node_modules/@babel/runtime/helpers/construct.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack:///./node_modules/core-js/modules/es.symbol.iterator.js","webpack:///./node_modules/core-js/internals/array-buffer-non-extensible.js","webpack:///./node_modules/@toruslabs/torus-embed/node_modules/eth-rpc-errors/dist/error-constants.js","webpack:///./node_modules/@toruslabs/torus-embed/node_modules/eth-rpc-errors/dist/classes.js","webpack:///./node_modules/@metamask/obs-store/dist/MergedStore.js","webpack:///./node_modules/@metamask/obs-store/dist/asStream.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./node_modules/core-js/internals/internal-metadata.js","webpack:///./node_modules/@metamask/obs-store/dist/transform.js","webpack:///./node_modules/core-js/modules/es.array.slice.js","webpack:///./node_modules/@metamask/obs-store/dist/ComposedStore.js"],"names":["global","uncurryThis","aCallable","isObject","hasOwn","arraySlice","NATIVE_BIND","Function","concat","join","factories","construct","C","argsLength","args","list","i","module","exports","bind","that","F","this","Prototype","prototype","partArgs","arguments","boundFunction","length","apply","_nonIterableSpread","TypeError","__esModule","_iterableToArray","iter","Symbol","iterator","Array","from","Transform","inherits","xtend","DestroyableTransform","opts","call","_destroyed","noop","chunk","enc","callback","through2","options","transform","flush","destroy","err","self","process","nextTick","emit","t2","_transform","_flush","ctor","Through2","override","obj","objectMode","highWaterMark","log","getLogger","_createSuper$1","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct$1","result","Super","NewTarget","constructor","Reflect","sham","Proxy","Boolean","valueOf","e","capitalizeFirstLetter","str","charAt","toUpperCase","slice","disableAll","SomeError","_Error","_super","_ref","_this","errors","responses","predicate","Error","Some","promises","Promise","resolve","reject","predicateError","finishedCount","sharedState","resolved","errorArr","fill","undefined","resultArr","forEach","x","index","then","resp","catch","error","finally","data","_","Object","values","reduce","acc","z","_error$data","_ref2","id","startsWith","msg","map","it","_predicateError","message","ownKeys$1","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread$1","target","source","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","_isNativeReflectConstruct","GetOrSetNonceError","kCombinations","s","k","set","cur","combs","tailCombs","j","thresholdSame","arr","t","hashMap","keyLookup","mark","_callee","endpoints","verifier","verifierId","lookupPromises","wrap","_context","prev","next","verifier_id","toString","abrupt","lookupResults","lookupShares","x1","errorResult","x2","keyResult","x3","JSON","stringify","stop","_x","_x2","_x3","waitKeyLookup","timeout","setTimeout","keyAssign","_callee2","torusNodePubs","lastPoint","firstPoint","nodeNum","initialPoint","signedData","acceptedErrorMsgs","_context2","Math","floor","random","headers","pubKeyX","X","pubKeyY","Y","useAPIKey","sent","t0","includes","_x4","_x5","_x6","_x7","_x8","_x9","ownKeys","_objectSpread","Torus","_ref$enableOneKey","enableOneKey","_ref$metadataHost","metadataHost","_ref$allowHost","allowHost","_ref$serverTimeOffset","serverTimeOffset","ec","value","_getUserTypeAndAddress","doesKeyAssign","_ref3","isNewKey","finalKeyResult","assignResult","_finalKeyResult$keys$","typeOfUser","nonce","pubNonce","modifiedPubKey","upgraded","_yield$this$getOrSetN","finalX","finalY","address","_args","t1","pub_key_X","pub_key_Y","getOrSetNonce","keyFromPublic","y","getPublic","add","keyFromPrivate","getX","getY","generateAddressFromPubKey","getUserTypeAndAddress","_setCustomKey","_ref4","privKeyHex","metadataNonce","torusKeyHex","customKeyHex","torusKey","privKey","customKey","newMetadataNonce","sub","umod","curve","n","generateMetadataParams","setMetadata","setCustomKey","_retrieveShares","_callee5","indexes","verifierParams","idToken","extraParams","promiseArr","tmpKey","pubKey","tokenCommitment","p","_args5","_context5","messageprefix","tokencommitment","temppubx","temppuby","verifieridentifier","completedRequests","promiseArrRequest","nodeSigs","_i","_i2","_p","encrypted","item","idtoken","nodesignatures","_ref5","_callee3","shareResponses","thresholdPublicKey","sharePromises","nodeIndex","_i3","metadata","sharesResolved","decryptedShares","allCombis","privateKey","_loop","_ret","_context3","PublicKey","sort","a","b","Index","cmp","Metadata","ephemPublicKey","Buffer","iv","mac","mode","ciphertext","atob","Share","padStart","debug","all","curr","currentCombi","currentCombiShares","v","shares","indices","derivedPrivateKey","lagrangeInterpolation","decryptedPubKey","decryptedPubKeyX","decryptedPubKeyY","_x10","_x11","_ref6","_callee4","returnedKey","_yield$_this$getNonce","ethAddress","_context4","getNonce","getMetadata","generateAddressFromPrivKey","_x12","retrieveShares","_getMetadata","_callee6","metadataResponse","_context6","_x13","_x14","setData","timestamp","Date","now","sig","sign","set_data","signature","r","_setMetadata","_callee7","_context7","_x15","_x16","secret","upper","lower","mul","neg","temp","delta","invm","publicKey","encode","ethAddressLower","publicKeyX","publicKeyY","_getPublicAddress","_callee8","_ref7","isExtended","_ref8","_nonce","_finalKeyResult$keys$2","_yield$this$getOrSetN2","_args8","_context8","getPublicAddress","_x17","_x18","_x19","_getOrSetNonce","_callee9","getOnly","_args9","_context9","_x20","_x21","_x22","_getNonce","_callee10","_context10","_x23","_x24","_x25","privKeyBN","nonceBN","enableAll","apiKey","embedHost","arrayLikeToArray","require","_arrayWithoutHoles","isArray","serializeError","isValidCode","getMessageFromCode","JSON_RPC_SERVER_ERROR_MESSAGE","error_constants_1","classes_1","FALLBACK_ERROR_CODE","errorCodes","rpc","internal","FALLBACK_MESSAGE","FALLBACK_ERROR","code","fallbackMessage","Number","isInteger","codeString","hasKey","errorValues","isJsonRpcServerError","fallbackError","shouldIncludeStack","_a","_b","EthereumRpcError","serialize","serialized","_error","originalError","assignOriginalError","stack","assign","hasOwnProperty","$","fails","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","stat","forced","getPrototypeOf","_getPrototypeOf","o","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","objectWithoutPropertiesLoose","_objectWithoutProperties","excluded","sourceSymbolKeys","indexOf","propertyIsEnumerable","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_toConsumableArray","_setPrototypeOf","getBuiltIn","aConstructor","anObject","create","nativeConstruct","ObjectPrototype","NEW_TARGET_BUG","ARGS_BUG","FORCED","Target","newTarget","$args","proto","instance","callWithSafeIterationClosing","isArrayIteratorMethod","isConstructor","lengthOfArrayLike","createProperty","getIterator","getIteratorMethod","arrayLike","O","IS_CONSTRUCTOR","argumentsLength","mapfn","mapping","step","iteratorMethod","done","collection","collectionStrong","init","classof","ARRAY_BUFFER_NON_EXTENSIBLE","$isExtensible","isExtensible","_arrayLikeToArray","len","arr2","_defineProperties","props","descriptor","configurable","writable","_createClass","Constructor","protoProps","staticProps","f","redefineAll","anInstance","iterate","defineIterator","setSpecies","DESCRIPTORS","fastKey","InternalStateModule","setInternalState","internalStateGetterFor","getterFor","getConstructor","wrapper","CONSTRUCTOR_NAME","IS_MAP","ADDER","iterable","type","first","last","size","AS_ENTRIES","getInternalState","define","previous","state","entry","getEntry","removed","clear","callbackfn","has","get","setStrong","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","iterated","kind","_unsupportedIterableToArray","minLen","name","test","equal","RegExp","flags","_typeof","assertThisInitialized","_possibleConstructorReturn","isForced","redefine","InternalMetadataModule","isCallable","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","IS_WEAK","NativeConstructor","NativePrototype","exported","fixMethod","KEY","uncurriedNativeMethod","REPLACE","entries","enable","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","ethErrors","utils_1","getEthJsonRpcError","arg","parseOpts","getEthProviderError","EthereumProviderError","parse","invalidRequest","invalidParams","methodNotFound","server","invalidInput","resourceNotFound","resourceUnavailable","transactionRejected","methodNotSupported","limitExceeded","provider","userRejectedRequest","unauthorized","unsupportedMethod","disconnected","chainDisconnected","custom","__importDefault","mod","ObservableStore","safe_event_emitter_1","default","initState","super","_state","_getState","newState","_putState","partialState","getState","putState","handler","on","removeListener","ETHEREUM_NETWORK","ROPSTEN","MAINNET","abi","constant","inputs","outputs","internalType","payable","stateMutability","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","rejected","network","proxyAddress","url","_currentEpoch","_torusNodeEndpoints","_torusNodePub","_torusIndexes","_network","localUrl","URL","href","projectId","setProvider","nodeListContract","nodeListAddress","updated","currentEpoch","torusNodeEndpoints","torusNodePub","torusIndexes","methods","epoch","getEpochInfo","nodeEthAddress","getNodeDetails","skip","skipPostEpochCheck","_nodeDetails","latestEpoch","getCurrentEpoch","latestEpochInfo","nodeList","pos","nodeEndpointRequests","getNodeEndpoint","nodeEndPoints","updatedEndpoints","updatedNodePub","endPointElement","endpoint","declaredIp","split","pubKx","replace","pubKy","isStream","stream","pipe","isWritableStream","_write","_writableState","isReadableStream","readable","_read","_readableState","isDuplexStream","LOGIN_PROVIDER","GOOGLE","FACEBOOK","TWITCH","REDDIT","DISCORD","WALLET_OPENLOGIN_VERIFIER_MAP","PAYMENT_PROVIDER","MOONPAY","WYRE","RAMPNETWORK","XANPOOL","MERCURYO","TRANSAK","TORUS_BUILD_ENV","PRODUCTION","DEVELOPMENT","BINANCE","TESTING","LRC","BETA","BUTTON_POSITION","BOTTOM_LEFT","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","paymentProviders$1","line1","line2","line3","supportPage","minOrderValue","maxOrderValue","validCurrencies","validCryptoCurrencies","includeFees","enforceMax","sell","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","configuration","supportedVerifierList","paymentProviders","api","prodTorusUrl","localStorageKey","window","location","hostname","runOnLoad","fn","document","body","addEventListener","htmlToElement","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","handleEvent","handle","eventName","_len","handlerArgs","_key","handlerWrapper","removeEventListener","handleStream","async","documentReady","readyState","messages","permanentlyDisconnected","sendSiteMetadata","unsupportedSync","method","invalidDuplexStream","invalidOptions","maxEventListeners","shouldSendMetadata","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","info","connected","chainId","warnings","enableDeprecation","sendDeprecation","events","close","networkChanged","notification","publicConfigStore","validatePaymentProvider","params","isValid","selectedProvider","selectedParams","fiatValue","requestedOrderAmount","parseFloat","selectedCurrency","selectedCryptoCurrency","createErrorMiddleware","req","res","logStreamDisconnectWarning","remoteLabel","emitter","warningMsg","warn","listenerCount","getPreopenInstanceId","getTorusUrl","buildEnv","integrity","torusUrl","logLevel","version","versionUsed","response","getUserLanguage","userLanguage","navigator","language","userLanguages","EMITTED_NOTIFICATIONS","NOOP","FEATURES_PROVIDER_CHANGE_WINDOW","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_CONFIRM_WINDOW","storageAvailable","storage","setItem","removeItem","getPopupFeatures","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","w","h","width","innerWidth","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","abs","top","features","defaultMaxListeners","getRpcPromiseCallback","unwrapResult","connectionStream","jsonRpcStreamName","experimentalMethods","send","isTorus","setMaxListeners","_defaultState","selectedAddress","networkVersion","_handleAccountsChanged","_handleChainChanged","_handleUnlockStateChanged","_handleConnect","_handleDisconnect","_handleStreamDisconnect","_sendSync","_rpcRequest","_warnOfDeprecation","_initializeState","request","sendAsync","mux","_publicConfigStore","storageKey","createStream","ignoreStream","isConnected","jsonRpcConnection","rpcEngine","middleware","_rpcEngine","payload","_sentWarnings","listener","addListener","once","prependListener","prependOnceListener","accounts","isUnlocked","initialized","isInternal","cb","_payload","jsonrpc","tryPreopenHandle","methodOrPayload","callbackOrArgs","isRecoverable","errorMessage","isPermanentlyDisconnected","streamName","isEthAccounts","finalAccounts","account","hasEmittedConnection","defaults","algorithms","delimiter","full","hashes","internalHashes","algorithm","update","digest","sri","output","main","finalOptions","windowTimer","iClosedWindow","_setupTimer","setInterval","closed","clearInterval","_this$window","open","focus","locationReplaceOnRedirect","imgExists","img","onload","onerror","src","getSiteName","siteName","querySelector","metaTitle","title","getSiteIcon","icon","querySelectorAll","find","_icon","getSiteMetadata","engine","domainMetadata","_excluded","defaultVerifiers","iframeIntegrity","expectedCacheControlHeader","UNSAFE_METHODS","isLocalStorageAvailable","torusIframeHtml","check","hash","crossOrigin","rel","relList","supports","head","appendChild","buttonPosition","modalZIndex","isLoggedIn","isInitialized","torusWidgetVisibility","requestedVerifier","currentVerifier","nodeDetailManager","torusJs","setAPIKey","alertZIndex","isIframeFullScreen","dappStorageKey","enableLogging","enabledVerifiers","host","networkName","blockExplorer","ticker","tickerName","loginConfig","showTorusButton","whiteLabel","skipTKey","useLocalStorage","setDefaultLevel","storedKey","localStorage","getItem","generatedKey","torusIframeUrl","pathname","endsWith","torusIframe","torusAlertContainer","style","display","setProperty","link","setAttribute","styleLink","defaultLanguage","customTranslations","mergedTranslations","languageTranslations","embedTranslations","handleSetup","_setupWeb3","initStream","communicationMux","getStream","success","_displayIframe","write","fetchUrl","fetch","cache","text","calculatedIntegrity","clearInit","login_hint","loginHint","ethereum","logOutStream","statusStream","statusStreamHandler","status","loggedIn","logout","isElement","element","Element","HTMLDocument","contains","remove","torusAlert","_sendWidgetVisibilityStatus","rest","providerChangeStream","preopenInstanceId","_handleWindow","path","showWalletStream","finalPath","showWalletHandler","instanceId","finalUrl","searchParams","append","walletWindow","nodeDetails","walletVerifier","openloginVerifier","existingV1User","v2User","newV2User","userInfoAccessStream","userInfoAccessHandler","approved","newRequest","userInfoStream","userInfoHandler","handlerChunk","topupStream","topupHandler","windowStream","handledWindow","_createPopupBlockAlert","closeHandler","receivedId","theme","isDark","colors","classList","torusBrand1","torusGray2","_this$whiteLabel","_this$whiteLabel$them","logoUrl","_this$whiteLabel2","_this$whiteLabel3","logoLight","logoDark","torusWidgetVisibilityStream","isFull","right","bottom","metamaskStream","targetWindow","contentWindow","targetOrigin","origin","communicationStream","inpageProvider","detectAccountRequestPrototypeModifier","m","originalMethod","handleLoginCb","_showLoginPopup","isLoginCallback","proxiedInpageProvider","deleteProperty","widgetStream","calledFromEmbed","loginHandler","oauthStream","_getLogoUrl","successAlert","btnContainer","bindOnLoad","children","_setEmbedWhiteLabel","attachOnLoad","TORUS_EVM","EIP155","EXTERNAL","NOT_READY","torusWalletOptions","adapterSettings","initParams","loginSettings","chainConfig","CONNECTED","torusInstance","checkInitializationRequirements","displayName","rpcTarget","parseInt","READY","autoConnect","rehydrated","connect","ERRORED","checkConnectionRequirements","notReady","CONNECTING","adapter","login","fromCode","reconnected","connectionError","cleanup","notConnectedError","hideTorusButton","DISCONNECTED","userInfo","getUserInfo","errors_1","__createBinding","k2","__exportStar","_classCallCheck","iteratorClose","ENTRIES","isNativeFunction","_wrapNativeSuper","Class","_cache","Map","Wrapper","INCORRECT_ITERATION","isNativeReflectConstruct","_construct","Parent","nativeKeys","preventExtensions","_isNativeFunction","defineWellKnownSymbol","ArrayBuffer","buffer","standard","fast_safe_stringify_1","stringifyReplacer","isValidEthProviderCode","MergedStore","ObservableStore_1","_children","child","_addChild","_updateWholeState","subscribe","childStates","storeAsStream","stream_1","ObservableStoreStream","Duplex","obsStore","resume","dest","_encoding","_size","unsubscribe","_destroy","_inherits","subClass","superClass","_objectWithoutPropertiesLoose","sourceKeys","hiddenKeys","getOwnPropertyNamesModule","getOwnPropertyNamesExternalModule","uid","FREEZING","REQUIRED","METADATA","objectID","weakData","getWeakData","onFreeze","meta","getOwnPropertyNames","splice","storeTransformStream","through2_1","syncTransformFn","toAbsoluteIndex","toIndexedObject","wellKnownSymbol","arrayMethodHasSpeciesSupport","un$Slice","HAS_SPECIES_SUPPORT","SPECIES","max","start","end","fin","ComposedStore","childKey","updateFromChild","childValue"],"mappings":"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","file":"js/chunk-4e8cb99d.3e872efe.js","sourcesContent":["'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar arraySlice = require('../internals/array-slice');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar Function = global.Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = NATIVE_BIND ? Function.bind : function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var Transform = require('readable-stream').Transform\n  , inherits  = require('util').inherits\n  , xtend     = require('xtend')\n\nfunction DestroyableTransform(opts) {\n  Transform.call(this, opts)\n  this._destroyed = false\n}\n\ninherits(DestroyableTransform, Transform)\n\nDestroyableTransform.prototype.destroy = function(err) {\n  if (this._destroyed) return\n  this._destroyed = true\n  \n  var self = this\n  process.nextTick(function() {\n    if (err)\n      self.emit('error', err)\n    self.emit('close')\n  })\n}\n\n// a noop _transform function\nfunction noop (chunk, enc, callback) {\n  callback(null, chunk)\n}\n\n\n// create a new export function, used by both the main export and\n// the .ctor export, contains common logic for dealing with arguments\nfunction through2 (construct) {\n  return function (options, transform, flush) {\n    if (typeof options == 'function') {\n      flush     = transform\n      transform = options\n      options   = {}\n    }\n\n    if (typeof transform != 'function')\n      transform = noop\n\n    if (typeof flush != 'function')\n      flush = null\n\n    return construct(options, transform, flush)\n  }\n}\n\n\n// main export, just make me a transform stream!\nmodule.exports = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(options)\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n\n\n// make me a reusable prototype that I can `new`, or implicitly `new`\n// with a constructor call\nmodule.exports.ctor = through2(function (options, transform, flush) {\n  function Through2 (override) {\n    if (!(this instanceof Through2))\n      return new Through2(override)\n\n    this.options = xtend(options, override)\n\n    DestroyableTransform.call(this, this.options)\n  }\n\n  inherits(Through2, DestroyableTransform)\n\n  Through2.prototype._transform = transform\n\n  if (flush)\n    Through2.prototype._flush = flush\n\n  return Through2\n})\n\n\nmodule.exports.obj = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(xtend({ objectMode: true, highWaterMark: 16 }, options))\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport { generatePrivate, getPublic, decrypt } from '@toruslabs/eccrypto';\nimport { post, generateJsonRPCObject, get, setAPIKey, setEmbedHost } from '@toruslabs/http-helpers';\nimport BN from 'bn.js';\nimport { ec } from 'elliptic';\nimport JsonStringify from 'json-stable-stringify';\nimport { keccak256, toChecksumAddress } from 'web3-utils';\nimport loglevel from 'loglevel';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _wrapNativeSuper from '@babel/runtime/helpers/wrapNativeSuper';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\n\nvar log = loglevel.getLogger('torus.js');\nlog.disableAll();\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nvar SomeError = /*#__PURE__*/function (_Error) {\n  _inherits(SomeError, _Error);\n\n  var _super = _createSuper$1(SomeError);\n\n  function SomeError(_ref) {\n    var _this;\n\n    var errors = _ref.errors,\n        responses = _ref.responses,\n        predicate = _ref.predicate;\n\n    _classCallCheck(this, SomeError);\n\n    _this = _super.call(this, 'Unable to resolve enough promises.');\n    _this.errors = errors;\n    _this.responses = responses;\n    _this.predicate = predicate;\n    return _this;\n  }\n\n  return _createClass(SomeError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar Some = function Some(promises, predicate) {\n  return new Promise(function (resolve, reject) {\n    var finishedCount = 0;\n    var sharedState = {\n      resolved: false\n    };\n    var errorArr = new Array(promises.length).fill(undefined);\n    var resultArr = new Array(promises.length).fill(undefined);\n    var predicateError;\n    promises.forEach(function (x, index) {\n      x.then(function (resp) {\n        resultArr[index] = resp;\n        return undefined;\n      }).catch(function (error) {\n        errorArr[index] = error;\n      }).finally(function () {\n        if (sharedState.resolved) return;\n        predicate(resultArr.slice(0), sharedState).then(function (data) {\n          sharedState.resolved = true;\n          resolve(data);\n          return undefined;\n        }).catch(function (error) {\n          // log only the last predicate error\n          predicateError = error;\n        }).finally(function (_) {\n          finishedCount += 1;\n\n          if (finishedCount === promises.length) {\n            var errors = Object.values(resultArr.reduce(function (acc, z) {\n              var _error$data;\n\n              var _ref2 = z || {},\n                  id = _ref2.id,\n                  error = _ref2.error;\n\n              if ((error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : _error$data.length) > 0) {\n                if (error.data.startsWith('Error occurred while verifying params')) acc[id] = capitalizeFirstLetter(error.data);else acc[id] = error.data;\n              }\n\n              return acc;\n            }, {}));\n\n            if (errors.length > 0) {\n              // Format-able errors\n              var msg = errors.length > 1 ? \"\\n\".concat(errors.map(function (it) {\n                return \"\\u2022 \".concat(it);\n              }).join('\\n')) : errors[0];\n              reject(new Error(msg));\n            } else {\n              var _predicateError;\n\n              reject(new SomeError({\n                errors: errorArr,\n                responses: resultArr,\n                predicate: ((_predicateError = predicateError) === null || _predicateError === void 0 ? void 0 : _predicateError.message) || predicateError\n              }));\n            }\n          }\n        });\n      });\n    });\n  });\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar GetOrSetNonceError = /*#__PURE__*/function (_Error) {\n  _inherits(GetOrSetNonceError, _Error);\n\n  var _super = _createSuper(GetOrSetNonceError);\n\n  function GetOrSetNonceError() {\n    _classCallCheck(this, GetOrSetNonceError);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(GetOrSetNonceError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar kCombinations = function kCombinations(s, k) {\n  var set = s;\n\n  if (typeof set === 'number') {\n    set = Array.from({\n      length: set\n    }, function (_, i) {\n      return i;\n    });\n  }\n\n  if (k > set.length || k <= 0) {\n    return [];\n  }\n\n  if (k === set.length) {\n    return [set];\n  }\n\n  if (k === 1) {\n    return set.reduce(function (acc, cur) {\n      return [].concat(_toConsumableArray(acc), [[cur]]);\n    }, []);\n  }\n\n  var combs = [];\n  var tailCombs = [];\n\n  for (var i = 0; i <= set.length - k + 1; i += 1) {\n    tailCombs = kCombinations(set.slice(i + 1), k - 1);\n\n    for (var j = 0; j < tailCombs.length; j += 1) {\n      combs.push([set[i]].concat(_toConsumableArray(tailCombs[j])));\n    }\n  }\n\n  return combs;\n};\nvar thresholdSame = function thresholdSame(arr, t) {\n  var hashMap = {};\n\n  for (var i = 0; i < arr.length; i += 1) {\n    var str = JsonStringify(arr[i]);\n    hashMap[str] = hashMap[str] ? hashMap[str] + 1 : 1;\n\n    if (hashMap[str] === t) {\n      return arr[i];\n    }\n  }\n\n  return undefined;\n};\nvar keyLookup = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(endpoints, verifier, verifierId) {\n    var lookupPromises;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            lookupPromises = endpoints.map(function (x) {\n              return post(x, generateJsonRPCObject('VerifierLookupRequest', {\n                verifier: verifier,\n                verifier_id: verifierId.toString()\n              })).catch(function (err) {\n                return log.error('lookup request failed', err);\n              });\n            });\n            return _context.abrupt(\"return\", Some(lookupPromises, function (lookupResults) {\n              var lookupShares = lookupResults.filter(function (x1) {\n                return x1;\n              });\n              var errorResult = thresholdSame(lookupShares.map(function (x2) {\n                return x2 && x2.error;\n              }), ~~(endpoints.length / 2) + 1);\n              var keyResult = thresholdSame(lookupShares.map(function (x3) {\n                return x3 && x3.result;\n              }), ~~(endpoints.length / 2) + 1);\n\n              if (keyResult || errorResult) {\n                return Promise.resolve({\n                  keyResult: keyResult,\n                  errorResult: errorResult\n                });\n              }\n\n              return Promise.reject(new Error(\"invalid results \".concat(JSON.stringify(lookupResults))));\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function keyLookup(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar waitKeyLookup = function waitKeyLookup(endpoints, verifier, verifierId, timeout) {\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      keyLookup(endpoints, verifier, verifierId).then(resolve).catch(reject);\n    }, timeout);\n  });\n};\nvar keyAssign = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(endpoints, torusNodePubs, lastPoint, firstPoint, verifier, verifierId) {\n    var nodeNum, initialPoint, data, signedData, acceptedErrorMsgs;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (lastPoint === undefined) {\n              nodeNum = Math.floor(Math.random() * endpoints.length);\n              initialPoint = nodeNum;\n            } else {\n              nodeNum = lastPoint % endpoints.length;\n            }\n\n            if (!(nodeNum === firstPoint)) {\n              _context2.next = 3;\n              break;\n            }\n\n            throw new Error('Looped through all');\n\n          case 3:\n            if (firstPoint !== undefined) initialPoint = firstPoint;\n            data = generateJsonRPCObject('KeyAssign', {\n              verifier: verifier,\n              verifier_id: verifierId.toString()\n            });\n            _context2.prev = 5;\n            _context2.next = 8;\n            return post('https://signer.tor.us/api/sign', data, {\n              headers: {\n                pubKeyX: torusNodePubs[nodeNum].X,\n                pubKeyY: torusNodePubs[nodeNum].Y\n              }\n            }, {\n              useAPIKey: true\n            });\n\n          case 8:\n            signedData = _context2.sent;\n            return _context2.abrupt(\"return\", post(endpoints[nodeNum], _objectSpread$1(_objectSpread$1({}, data), signedData), {\n              headers: {\n                'Content-Type': 'application/json; charset=utf-8'\n              }\n            }));\n\n          case 12:\n            _context2.prev = 12;\n            _context2.t0 = _context2[\"catch\"](5);\n            log.error(_context2.t0);\n            acceptedErrorMsgs = [// Slow node\n            'Timed out', // Happens when the node is not reachable (dns issue etc)\n            'TypeError: Failed to fetch', // All except iOS and Firefox\n            'TypeError: cancelled', // iOS\n            'TypeError: NetworkError when attempting to fetch resource.' // Firefox\n            ];\n\n            if (!acceptedErrorMsgs.includes(_context2.t0.message)) {\n              _context2.next = 18;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", keyAssign(endpoints, torusNodePubs, nodeNum + 1, initialPoint, verifier, verifierId));\n\n          case 18:\n            throw new Error(\"Sorry, the Torus Network that powers Web3Auth is currently very busy.\\n    We will generate your key in time. Pls try again later. \\n\\n    \".concat(_context2.t0.message || ''));\n\n          case 19:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[5, 12]]);\n  }));\n\n  return function keyAssign(_x4, _x5, _x6, _x7, _x8, _x9) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n// of Torus nodes to handle malicious node responses\n\nvar Torus = /*#__PURE__*/function () {\n  function Torus() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$enableOneKey = _ref.enableOneKey,\n        enableOneKey = _ref$enableOneKey === void 0 ? false : _ref$enableOneKey,\n        _ref$metadataHost = _ref.metadataHost,\n        metadataHost = _ref$metadataHost === void 0 ? 'https://metadata.tor.us' : _ref$metadataHost,\n        _ref$allowHost = _ref.allowHost,\n        allowHost = _ref$allowHost === void 0 ? 'https://signer.tor.us/api/allow' : _ref$allowHost,\n        _ref$serverTimeOffset = _ref.serverTimeOffset,\n        serverTimeOffset = _ref$serverTimeOffset === void 0 ? 0 : _ref$serverTimeOffset;\n\n    _classCallCheck(this, Torus);\n\n    this.ec = new ec('secp256k1');\n    this.metadataHost = metadataHost;\n    this.allowHost = allowHost;\n    this.enableOneKey = enableOneKey;\n    this.serverTimeOffset = serverTimeOffset || 0; // ms\n  }\n\n  _createClass(Torus, [{\n    key: \"getUserTypeAndAddress\",\n    value:\n    /**\n     * Note: use this function only for openlogin tkey account lookups.\n     */\n    function () {\n      var _getUserTypeAndAddress = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(endpoints, torusNodePubs, _ref2) {\n        var verifier,\n            verifierId,\n            doesKeyAssign,\n            _ref3,\n            keyResult,\n            errorResult,\n            isNewKey,\n            finalKeyResult,\n            assignResult,\n            _finalKeyResult$keys$,\n            X,\n            Y,\n            typeOfUser,\n            nonce,\n            pubNonce,\n            modifiedPubKey,\n            upgraded,\n            _yield$this$getOrSetN,\n            finalX,\n            finalY,\n            address,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                verifier = _ref2.verifier, verifierId = _ref2.verifierId;\n                doesKeyAssign = _args.length > 3 && _args[3] !== undefined ? _args[3] : false;\n                _context.next = 4;\n                return keyLookup(endpoints, verifier, verifierId);\n\n              case 4:\n                _context.t0 = _context.sent;\n\n                if (_context.t0) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.t0 = {};\n\n              case 7:\n                _ref3 = _context.t0;\n                keyResult = _ref3.keyResult;\n                errorResult = _ref3.errorResult;\n                isNewKey = false;\n\n                if (!(errorResult && JSON.stringify(errorResult).includes('Verifier + VerifierID has not yet been assigned'))) {\n                  _context.next = 26;\n                  break;\n                }\n\n                if (doesKeyAssign) {\n                  _context.next = 14;\n                  break;\n                }\n\n                throw new Error('Verifier + VerifierID has not yet been assigned');\n\n              case 14:\n                _context.next = 16;\n                return keyAssign(endpoints, torusNodePubs, undefined, undefined, verifier, verifierId);\n\n              case 16:\n                _context.next = 18;\n                return waitKeyLookup(endpoints, verifier, verifierId, 1000);\n\n              case 18:\n                _context.t1 = _context.sent;\n\n                if (_context.t1) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.t1 = {};\n\n              case 21:\n                assignResult = _context.t1;\n                finalKeyResult = assignResult.keyResult;\n                isNewKey = true;\n                _context.next = 31;\n                break;\n\n              case 26:\n                if (!keyResult) {\n                  _context.next = 30;\n                  break;\n                }\n\n                finalKeyResult = keyResult;\n                _context.next = 31;\n                break;\n\n              case 30:\n                throw new Error(\"node results do not match at first lookup \".concat(JSON.stringify(keyResult || {}), \", \").concat(JSON.stringify(errorResult || {})));\n\n              case 31:\n                if (!finalKeyResult) {\n                  _context.next = 61;\n                  break;\n                }\n\n                _finalKeyResult$keys$ = finalKeyResult.keys[0], X = _finalKeyResult$keys$.pub_key_X, Y = _finalKeyResult$keys$.pub_key_Y;\n                _context.prev = 33;\n                _context.next = 37;\n                return this.getOrSetNonce(X, Y, undefined, !isNewKey);\n\n              case 37:\n                _yield$this$getOrSetN = _context.sent;\n                typeOfUser = _yield$this$getOrSetN.typeOfUser;\n                nonce = _yield$this$getOrSetN.nonce;\n                pubNonce = _yield$this$getOrSetN.pubNonce;\n                upgraded = _yield$this$getOrSetN.upgraded;\n                nonce = new BN(nonce || '0', 16);\n                _context.next = 48;\n                break;\n\n              case 45:\n                _context.prev = 45;\n                _context.t2 = _context[\"catch\"](33);\n                throw new GetOrSetNonceError();\n\n              case 48:\n                if (!(typeOfUser === 'v1')) {\n                  _context.next = 52;\n                  break;\n                }\n\n                modifiedPubKey = this.ec.keyFromPublic({\n                  x: X.toString(16),\n                  y: Y.toString(16)\n                }).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());\n                _context.next = 57;\n                break;\n\n              case 52:\n                if (!(typeOfUser === 'v2')) {\n                  _context.next = 56;\n                  break;\n                }\n\n                modifiedPubKey = this.ec.keyFromPublic({\n                  x: X.toString(16),\n                  y: Y.toString(16)\n                }).getPublic().add(this.ec.keyFromPublic({\n                  x: pubNonce.x,\n                  y: pubNonce.y\n                }).getPublic());\n                _context.next = 57;\n                break;\n\n              case 56:\n                throw new Error('getOrSetNonce should always return typeOfUser.');\n\n              case 57:\n                finalX = modifiedPubKey.getX().toString(16);\n                finalY = modifiedPubKey.getY().toString(16);\n                address = this.generateAddressFromPubKey(modifiedPubKey.getX(), modifiedPubKey.getY());\n                return _context.abrupt(\"return\", {\n                  typeOfUser: typeOfUser,\n                  nonce: nonce,\n                  pubNonce: pubNonce,\n                  upgraded: upgraded,\n                  X: finalX,\n                  Y: finalY,\n                  address: address\n                });\n\n              case 61:\n                throw new Error(\"node results do not match at final lookup \".concat(JSON.stringify(keyResult || {}), \", \").concat(JSON.stringify(errorResult || {})));\n\n              case 62:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[33, 45]]);\n      }));\n\n      function getUserTypeAndAddress(_x, _x2, _x3) {\n        return _getUserTypeAndAddress.apply(this, arguments);\n      }\n\n      return getUserTypeAndAddress;\n    }()\n  }, {\n    key: \"setCustomKey\",\n    value: function () {\n      var _setCustomKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref4) {\n        var privKeyHex, metadataNonce, torusKeyHex, customKeyHex, torusKey, privKey, customKey, newMetadataNonce, data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                privKeyHex = _ref4.privKeyHex, metadataNonce = _ref4.metadataNonce, torusKeyHex = _ref4.torusKeyHex, customKeyHex = _ref4.customKeyHex;\n\n                if (torusKeyHex) {\n                  torusKey = new BN(torusKeyHex, 16);\n                } else {\n                  privKey = new BN(privKeyHex, 16);\n                  torusKey = privKey.sub(metadataNonce).umod(this.ec.curve.n);\n                }\n\n                customKey = new BN(customKeyHex, 16);\n                newMetadataNonce = customKey.sub(torusKey).umod(this.ec.curve.n);\n                data = this.generateMetadataParams(newMetadataNonce.toString(16), torusKey.toString(16));\n                _context2.next = 7;\n                return this.setMetadata(data);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setCustomKey(_x4) {\n        return _setCustomKey.apply(this, arguments);\n      }\n\n      return setCustomKey;\n    }()\n  }, {\n    key: \"retrieveShares\",\n    value: function () {\n      var _retrieveShares = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(endpoints, indexes, verifier, verifierParams, idToken) {\n        var _this = this;\n\n        var extraParams,\n            promiseArr,\n            tmpKey,\n            pubKey,\n            pubKeyX,\n            pubKeyY,\n            tokenCommitment,\n            i,\n            p,\n            _args5 = arguments;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                extraParams = _args5.length > 5 && _args5[5] !== undefined ? _args5[5] : {};\n                promiseArr = [];\n                _context5.next = 4;\n                return get(this.allowHost, {\n                  headers: {\n                    verifier: verifier,\n                    verifier_id: verifierParams.verifier_id\n                  }\n                }, {\n                  useAPIKey: true\n                });\n\n              case 4:\n                /*\n                  CommitmentRequestParams struct {\n                    MessagePrefix      string `json:\"messageprefix\"`\n                    TokenCommitment    string `json:\"tokencommitment\"`\n                    TempPubX           string `json:\"temppubx\"`\n                    TempPubY           string `json:\"temppuby\"`\n                    VerifierIdentifier string `json:\"verifieridentifier\"`\n                  } \n                  */\n                // generate temporary private and public key that is used to secure receive shares\n                tmpKey = generatePrivate();\n                pubKey = getPublic(tmpKey).toString('hex');\n                pubKeyX = pubKey.slice(2, 66);\n                pubKeyY = pubKey.slice(66);\n                tokenCommitment = keccak256(idToken); // make commitment requests to endpoints\n\n                for (i = 0; i < endpoints.length; i += 1) {\n                  p = post(endpoints[i], generateJsonRPCObject('CommitmentRequest', {\n                    messageprefix: 'mug00',\n                    tokencommitment: tokenCommitment.slice(2),\n                    temppubx: pubKeyX,\n                    temppuby: pubKeyY,\n                    verifieridentifier: verifier\n                  })).catch(function (err) {\n                    return log.error('commitment', err);\n                  });\n                  promiseArr.push(p);\n                }\n                /*\n                  ShareRequestParams struct {\n                    Item []bijson.RawMessage `json:\"item\"`\n                  }\n                  ShareRequestItem struct {\n                    IDToken            string          `json:\"idtoken\"`\n                    NodeSignatures     []NodeSignature `json:\"nodesignatures\"`\n                    VerifierIdentifier string          `json:\"verifieridentifier\"`\n                  }\n                  NodeSignature struct {\n                    Signature   string\n                    Data        string\n                    NodePubKeyX string\n                    NodePubKeyY string\n                  }\n                  CommitmentRequestResult struct {\n                    Signature string `json:\"signature\"`\n                    Data      string `json:\"data\"`\n                    NodePubX  string `json:\"nodepubx\"`\n                    NodePubY  string `json:\"nodepuby\"`\n                  }\n                  */\n                // send share request once k + t number of commitment requests have completed\n\n\n                return _context5.abrupt(\"return\", Some(promiseArr, function (resultArr) {\n                  var completedRequests = resultArr.filter(function (x) {\n                    if (!x || _typeof(x) !== 'object') {\n                      return false;\n                    }\n\n                    if (x.error) {\n                      return false;\n                    }\n\n                    return true;\n                  });\n\n                  if (completedRequests.length >= ~~(endpoints.length / 4) * 3 + 1) {\n                    return Promise.resolve(resultArr);\n                  }\n\n                  return Promise.reject(new Error(\"invalid \".concat(JSON.stringify(resultArr))));\n                }).then(function (responses) {\n                  var promiseArrRequest = [];\n                  var nodeSigs = [];\n\n                  for (var _i = 0; _i < responses.length; _i += 1) {\n                    if (responses[_i]) nodeSigs.push(responses[_i].result);\n                  }\n\n                  for (var _i2 = 0; _i2 < endpoints.length; _i2 += 1) {\n                    // eslint-disable-next-line promise/no-nesting\n                    var _p = post(endpoints[_i2], generateJsonRPCObject('ShareRequest', {\n                      encrypted: 'yes',\n                      item: [_objectSpread(_objectSpread({}, verifierParams), {}, {\n                        idtoken: idToken,\n                        nodesignatures: nodeSigs,\n                        verifieridentifier: verifier\n                      }, extraParams)]\n                    })).catch(function (err) {\n                      return log.error('share req', err);\n                    });\n\n                    promiseArrRequest.push(_p);\n                  }\n\n                  return Some(promiseArrRequest, /*#__PURE__*/function () {\n                    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(shareResponses, sharedState) {\n                      var completedRequests, thresholdPublicKey, sharePromises, nodeIndex, _i3, metadata, sharesResolved, decryptedShares, allCombis, privateKey, _loop, j, _ret;\n\n                      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                        while (1) {\n                          switch (_context3.prev = _context3.next) {\n                            case 0:\n                              /*\n                                  ShareRequestResult struct {\n                                    Keys []KeyAssignment\n                                  }\n                                          / KeyAssignmentPublic -\n                                  type KeyAssignmentPublic struct {\n                                    Index     big.Int\n                                    PublicKey common.Point\n                                    Threshold int\n                                    Verifiers map[string][]string // Verifier => VerifierID\n                                  }\n                                   // KeyAssignment -\n                                  type KeyAssignment struct {\n                                    KeyAssignmentPublic\n                                    Share big.Int // Or Si\n                                  }\n                                */\n                              // check if threshold number of nodes have returned the same user public key\n                              completedRequests = shareResponses.filter(function (x) {\n                                return x;\n                              });\n                              thresholdPublicKey = thresholdSame(shareResponses.map(function (x) {\n                                return x && x.result && x.result.keys[0].PublicKey;\n                              }), ~~(endpoints.length / 2) + 1); // optimistically run lagrange interpolation once threshold number of shares have been received\n                              // this is matched against the user public key to ensure that shares are consistent\n\n                              if (!(completedRequests.length >= ~~(endpoints.length / 2) + 1 && thresholdPublicKey)) {\n                                _context3.next = 25;\n                                break;\n                              }\n\n                              sharePromises = [];\n                              nodeIndex = [];\n\n                              for (_i3 = 0; _i3 < shareResponses.length; _i3 += 1) {\n                                if (shareResponses[_i3] && shareResponses[_i3].result && shareResponses[_i3].result.keys && shareResponses[_i3].result.keys.length > 0) {\n                                  shareResponses[_i3].result.keys.sort(function (a, b) {\n                                    return new BN(a.Index, 16).cmp(new BN(b.Index, 16));\n                                  });\n\n                                  if (shareResponses[_i3].result.keys[0].Metadata) {\n                                    metadata = {\n                                      ephemPublicKey: Buffer.from(shareResponses[_i3].result.keys[0].Metadata.ephemPublicKey, 'hex'),\n                                      iv: Buffer.from(shareResponses[_i3].result.keys[0].Metadata.iv, 'hex'),\n                                      mac: Buffer.from(shareResponses[_i3].result.keys[0].Metadata.mac, 'hex'),\n                                      mode: Buffer.from(shareResponses[_i3].result.keys[0].Metadata.mode, 'hex')\n                                    };\n                                    sharePromises.push( // eslint-disable-next-line promise/no-nesting\n                                    decrypt(tmpKey, _objectSpread(_objectSpread({}, metadata), {}, {\n                                      ciphertext: Buffer.from(atob(shareResponses[_i3].result.keys[0].Share).padStart(64, '0'), 'hex')\n                                    })).catch(function (err) {\n                                      return log.debug('share decryption', err);\n                                    }));\n                                  } else {\n                                    sharePromises.push(Promise.resolve(Buffer.from(shareResponses[_i3].result.keys[0].Share.padStart(64, '0'), 'hex')));\n                                  }\n                                } else {\n                                  sharePromises.push(Promise.resolve(undefined));\n                                }\n\n                                nodeIndex.push(new BN(indexes[_i3], 16));\n                              }\n\n                              _context3.next = 8;\n                              return Promise.all(sharePromises);\n\n                            case 8:\n                              sharesResolved = _context3.sent;\n\n                              if (!sharedState.resolved) {\n                                _context3.next = 11;\n                                break;\n                              }\n\n                              return _context3.abrupt(\"return\", undefined);\n\n                            case 11:\n                              decryptedShares = sharesResolved.reduce(function (acc, curr, index) {\n                                if (curr) acc.push({\n                                  index: nodeIndex[index],\n                                  value: new BN(curr)\n                                });\n                                return acc;\n                              }, []); // run lagrange interpolation on all subsets, faster in the optimistic scenario than berlekamp-welch due to early exit\n\n                              // run lagrange interpolation on all subsets, faster in the optimistic scenario than berlekamp-welch due to early exit\n                              allCombis = kCombinations(decryptedShares.length, ~~(endpoints.length / 2) + 1);\n\n                              _loop = function _loop(j) {\n                                var currentCombi = allCombis[j];\n                                var currentCombiShares = decryptedShares.filter(function (v, index) {\n                                  return currentCombi.includes(index);\n                                });\n                                var shares = currentCombiShares.map(function (x) {\n                                  return x.value;\n                                });\n                                var indices = currentCombiShares.map(function (x) {\n                                  return x.index;\n                                });\n\n                                var derivedPrivateKey = _this.lagrangeInterpolation(shares, indices);\n\n                                var decryptedPubKey = getPublic(Buffer.from(derivedPrivateKey.toString(16, 64), 'hex')).toString('hex');\n                                var decryptedPubKeyX = decryptedPubKey.slice(2, 66);\n                                var decryptedPubKeyY = decryptedPubKey.slice(66);\n\n                                if (new BN(decryptedPubKeyX, 16).cmp(new BN(thresholdPublicKey.X, 16)) === 0 && new BN(decryptedPubKeyY, 16).cmp(new BN(thresholdPublicKey.Y, 16)) === 0) {\n                                  privateKey = derivedPrivateKey;\n                                  return \"break\";\n                                }\n                              };\n\n                              j = 0;\n\n                            case 15:\n                              if (!(j < allCombis.length)) {\n                                _context3.next = 22;\n                                break;\n                              }\n\n                              _ret = _loop(j);\n\n                              if (!(_ret === \"break\")) {\n                                _context3.next = 19;\n                                break;\n                              }\n\n                              return _context3.abrupt(\"break\", 22);\n\n                            case 19:\n                              j += 1;\n                              _context3.next = 15;\n                              break;\n\n                            case 22:\n                              if (!(privateKey === undefined)) {\n                                _context3.next = 24;\n                                break;\n                              }\n\n                              throw new Error('could not derive private key');\n\n                            case 24:\n                              return _context3.abrupt(\"return\", privateKey);\n\n                            case 25:\n                              throw new Error('invalid');\n\n                            case 26:\n                            case \"end\":\n                              return _context3.stop();\n                          }\n                        }\n                      }, _callee3);\n                    }));\n\n                    return function (_x10, _x11) {\n                      return _ref5.apply(this, arguments);\n                    };\n                  }());\n                }).then( /*#__PURE__*/function () {\n                  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(returnedKey) {\n                    var privateKey, decryptedPubKey, decryptedPubKeyX, decryptedPubKeyY, metadataNonce, _yield$_this$getNonce, nonce, ethAddress;\n\n                    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            privateKey = returnedKey;\n                            decryptedPubKey = getPublic(Buffer.from(privateKey.toString(16, 64), 'hex')).toString('hex');\n                            decryptedPubKeyX = decryptedPubKey.slice(2, 66);\n                            decryptedPubKeyY = decryptedPubKey.slice(66);\n\n                            if (!_this.enableOneKey) {\n                              _context4.next = 12;\n                              break;\n                            }\n\n                            _context4.next = 7;\n                            return _this.getNonce(decryptedPubKeyX, decryptedPubKeyY, privateKey);\n\n                          case 7:\n                            _yield$_this$getNonce = _context4.sent;\n                            nonce = _yield$_this$getNonce.nonce;\n                            metadataNonce = new BN(nonce || '0', 16);\n                            _context4.next = 15;\n                            break;\n\n                          case 12:\n                            _context4.next = 14;\n                            return _this.getMetadata({\n                              pub_key_X: decryptedPubKeyX,\n                              pub_key_Y: decryptedPubKeyY\n                            });\n\n                          case 14:\n                            metadataNonce = _context4.sent;\n\n                          case 15:\n                            log.debug('> torus.js/retrieveShares', {\n                              privKey: privateKey.toString(16),\n                              metadataNonce: metadataNonce.toString(16)\n                            });\n                            privateKey = privateKey.add(metadataNonce).umod(_this.ec.curve.n);\n                            ethAddress = _this.generateAddressFromPrivKey(privateKey);\n                            log.debug('> torus.js/retrieveShares', {\n                              ethAddress: ethAddress,\n                              privKey: privateKey.toString(16)\n                            }); // return reconstructed private key and ethereum address\n\n                            return _context4.abrupt(\"return\", {\n                              ethAddress: ethAddress,\n                              privKey: privateKey.toString('hex', 64),\n                              metadataNonce: metadataNonce\n                            });\n\n                          case 20:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n\n                  return function (_x12) {\n                    return _ref6.apply(this, arguments);\n                  };\n                }()));\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function retrieveShares(_x5, _x6, _x7, _x8, _x9) {\n        return _retrieveShares.apply(this, arguments);\n      }\n\n      return retrieveShares;\n    }()\n  }, {\n    key: \"getMetadata\",\n    value: function () {\n      var _getMetadata = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data, options) {\n        var metadataResponse;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return post(\"\".concat(this.metadataHost, \"/get\"), data, options, {\n                  useAPIKey: true\n                });\n\n              case 3:\n                metadataResponse = _context6.sent;\n\n                if (!(!metadataResponse || !metadataResponse.message)) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", new BN(0));\n\n              case 6:\n                return _context6.abrupt(\"return\", new BN(metadataResponse.message, 16));\n\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](0);\n                log.error('get metadata error', _context6.t0);\n                return _context6.abrupt(\"return\", new BN(0));\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 9]]);\n      }));\n\n      function getMetadata(_x13, _x14) {\n        return _getMetadata.apply(this, arguments);\n      }\n\n      return getMetadata;\n    }()\n  }, {\n    key: \"generateMetadataParams\",\n    value: function generateMetadataParams(message, privateKey) {\n      var key = this.ec.keyFromPrivate(privateKey.toString('hex', 64));\n      var setData = {\n        data: message,\n        timestamp: new BN(~~(this.serverTimeOffset + Date.now() / 1000)).toString(16)\n      };\n      var sig = key.sign(keccak256(JsonStringify(setData)).slice(2));\n      return {\n        pub_key_X: key.getPublic().getX().toString('hex'),\n        pub_key_Y: key.getPublic().getY().toString('hex'),\n        set_data: setData,\n        signature: Buffer.from(sig.r.toString(16, 64) + sig.s.toString(16, 64) + new BN(sig.v).toString(16, 2), 'hex').toString('base64')\n      };\n    }\n  }, {\n    key: \"setMetadata\",\n    value: function () {\n      var _setMetadata = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data, options) {\n        var metadataResponse;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return post(\"\".concat(this.metadataHost, \"/set\"), data, options, {\n                  useAPIKey: true\n                });\n\n              case 3:\n                metadataResponse = _context7.sent;\n                return _context7.abrupt(\"return\", metadataResponse.message);\n\n              case 7:\n                _context7.prev = 7;\n                _context7.t0 = _context7[\"catch\"](0);\n                log.error('set metadata error', _context7.t0);\n                return _context7.abrupt(\"return\", '');\n\n              case 11:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 7]]);\n      }));\n\n      function setMetadata(_x15, _x16) {\n        return _setMetadata.apply(this, arguments);\n      }\n\n      return setMetadata;\n    }()\n  }, {\n    key: \"lagrangeInterpolation\",\n    value: function lagrangeInterpolation(shares, nodeIndex) {\n      if (shares.length !== nodeIndex.length) {\n        return null;\n      }\n\n      var secret = new BN(0);\n\n      for (var i = 0; i < shares.length; i += 1) {\n        var upper = new BN(1);\n        var lower = new BN(1);\n\n        for (var j = 0; j < shares.length; j += 1) {\n          if (i !== j) {\n            upper = upper.mul(nodeIndex[j].neg());\n            upper = upper.umod(this.ec.curve.n);\n            var temp = nodeIndex[i].sub(nodeIndex[j]);\n            temp = temp.umod(this.ec.curve.n);\n            lower = lower.mul(temp).umod(this.ec.curve.n);\n          }\n        }\n\n        var delta = upper.mul(lower.invm(this.ec.curve.n)).umod(this.ec.curve.n);\n        delta = delta.mul(shares[i]).umod(this.ec.curve.n);\n        secret = secret.add(delta);\n      }\n\n      return secret.umod(this.ec.curve.n);\n    }\n  }, {\n    key: \"generateAddressFromPrivKey\",\n    value: function generateAddressFromPrivKey(privateKey) {\n      var key = this.ec.keyFromPrivate(privateKey.toString('hex', 64), 'hex');\n      var publicKey = key.getPublic().encode('hex').slice(2);\n      var ethAddressLower = \"0x\".concat(keccak256(Buffer.from(publicKey, 'hex')).slice(64 - 38));\n      return toChecksumAddress(ethAddressLower);\n    }\n  }, {\n    key: \"generateAddressFromPubKey\",\n    value: function generateAddressFromPubKey(publicKeyX, publicKeyY) {\n      var key = this.ec.keyFromPublic({\n        x: publicKeyX.toString('hex', 64),\n        y: publicKeyY.toString('hex', 64)\n      });\n      var publicKey = key.getPublic().encode('hex').slice(2);\n      var ethAddressLower = \"0x\".concat(keccak256(Buffer.from(publicKey, 'hex')).slice(64 - 38));\n      return toChecksumAddress(ethAddressLower);\n    }\n    /**\n     * Note: use this function only with custom auth, don't use to lookup openlogin accounts.\n     */\n\n  }, {\n    key: \"getPublicAddress\",\n    value: function () {\n      var _getPublicAddress = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(endpoints, torusNodePubs, _ref7) {\n        var verifier,\n            verifierId,\n            isExtended,\n            finalKeyResult,\n            isNewKey,\n            _ref8,\n            keyResult,\n            errorResult,\n            assignResult,\n            _nonce,\n            _finalKeyResult$keys$2,\n            X,\n            Y,\n            typeOfUser,\n            nonce,\n            pubNonce,\n            modifiedPubKey,\n            upgraded,\n            _yield$this$getOrSetN2,\n            address,\n            _args8 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                verifier = _ref7.verifier, verifierId = _ref7.verifierId;\n                isExtended = _args8.length > 3 && _args8[3] !== undefined ? _args8[3] : false;\n                log.debug('> torus.js/getPublicAddress', {\n                  endpoints: endpoints,\n                  torusNodePubs: torusNodePubs,\n                  verifier: verifier,\n                  verifierId: verifierId,\n                  isExtended: isExtended\n                });\n                isNewKey = false;\n                _context8.next = 6;\n                return keyLookup(endpoints, verifier, verifierId);\n\n              case 6:\n                _context8.t0 = _context8.sent;\n\n                if (_context8.t0) {\n                  _context8.next = 9;\n                  break;\n                }\n\n                _context8.t0 = {};\n\n              case 9:\n                _ref8 = _context8.t0;\n                keyResult = _ref8.keyResult;\n                errorResult = _ref8.errorResult;\n\n                if (!(errorResult && JSON.stringify(errorResult).includes('Verifier not supported'))) {\n                  _context8.next = 16;\n                  break;\n                }\n\n                throw new Error(\"Verifier not supported. Check if you: \\n\\n      1. Are on the right network (Torus testnet/mainnet) \\n\\n      2. Have setup a verifier on dashboard.web3auth.io?\");\n\n              case 16:\n                if (!(errorResult && JSON.stringify(errorResult).includes('Verifier + VerifierID has not yet been assigned'))) {\n                  _context8.next = 29;\n                  break;\n                }\n\n                _context8.next = 19;\n                return keyAssign(endpoints, torusNodePubs, undefined, undefined, verifier, verifierId);\n\n              case 19:\n                _context8.next = 21;\n                return waitKeyLookup(endpoints, verifier, verifierId, 1000);\n\n              case 21:\n                _context8.t1 = _context8.sent;\n\n                if (_context8.t1) {\n                  _context8.next = 24;\n                  break;\n                }\n\n                _context8.t1 = {};\n\n              case 24:\n                assignResult = _context8.t1;\n                finalKeyResult = assignResult.keyResult;\n                isNewKey = true;\n                _context8.next = 34;\n                break;\n\n              case 29:\n                if (!keyResult) {\n                  _context8.next = 33;\n                  break;\n                }\n\n                finalKeyResult = keyResult;\n                _context8.next = 34;\n                break;\n\n              case 33:\n                throw new Error(\"node results do not match at first lookup \".concat(JSON.stringify(keyResult || {}), \", \").concat(JSON.stringify(errorResult || {})));\n\n              case 34:\n                log.debug('> torus.js/getPublicAddress', {\n                  finalKeyResult: finalKeyResult,\n                  isNewKey: isNewKey\n                });\n\n                if (!finalKeyResult) {\n                  _context8.next = 76;\n                  break;\n                }\n\n                _finalKeyResult$keys$2 = finalKeyResult.keys[0], X = _finalKeyResult$keys$2.pub_key_X, Y = _finalKeyResult$keys$2.pub_key_Y;\n\n                if (!this.enableOneKey) {\n                  _context8.next = 64;\n                  break;\n                }\n\n                _context8.prev = 38;\n                _context8.next = 42;\n                return this.getOrSetNonce(X, Y, undefined, !isNewKey);\n\n              case 42:\n                _yield$this$getOrSetN2 = _context8.sent;\n                typeOfUser = _yield$this$getOrSetN2.typeOfUser;\n                nonce = _yield$this$getOrSetN2.nonce;\n                pubNonce = _yield$this$getOrSetN2.pubNonce;\n                upgraded = _yield$this$getOrSetN2.upgraded;\n                nonce = new BN(nonce || '0', 16);\n                _context8.next = 53;\n                break;\n\n              case 50:\n                _context8.prev = 50;\n                _context8.t2 = _context8[\"catch\"](38);\n                throw new GetOrSetNonceError();\n\n              case 53:\n                if (!(typeOfUser === 'v1')) {\n                  _context8.next = 57;\n                  break;\n                }\n\n                modifiedPubKey = this.ec.keyFromPublic({\n                  x: X.toString(16),\n                  y: Y.toString(16)\n                }).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());\n                _context8.next = 62;\n                break;\n\n              case 57:\n                if (!(typeOfUser === 'v2')) {\n                  _context8.next = 61;\n                  break;\n                }\n\n                if (upgraded) {\n                  // OneKey is upgraded to 2/n, returned address is address of Torus key (postbox key), not tKey\n                  modifiedPubKey = this.ec.keyFromPublic({\n                    x: X.toString(16),\n                    y: Y.toString(16)\n                  }).getPublic();\n                } else {\n                  modifiedPubKey = this.ec.keyFromPublic({\n                    x: X.toString(16),\n                    y: Y.toString(16)\n                  }).getPublic().add(this.ec.keyFromPublic({\n                    x: pubNonce.x,\n                    y: pubNonce.y\n                  }).getPublic());\n                }\n\n                _context8.next = 62;\n                break;\n\n              case 61:\n                throw new Error('getOrSetNonce should always return typeOfUser.');\n\n              case 62:\n                _context8.next = 69;\n                break;\n\n              case 64:\n                typeOfUser = 'v1';\n                _context8.next = 67;\n                return this.getMetadata({\n                  pub_key_X: X,\n                  pub_key_Y: Y\n                });\n\n              case 67:\n                nonce = _context8.sent;\n                modifiedPubKey = this.ec.keyFromPublic({\n                  x: X.toString(16),\n                  y: Y.toString(16)\n                }).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());\n\n              case 69:\n                X = modifiedPubKey.getX().toString(16);\n                Y = modifiedPubKey.getY().toString(16);\n                address = this.generateAddressFromPubKey(modifiedPubKey.getX(), modifiedPubKey.getY());\n                log.debug('> torus.js/getPublicAddress', {\n                  X: X,\n                  Y: Y,\n                  address: address,\n                  typeOfUser: typeOfUser,\n                  nonce: (_nonce = nonce) === null || _nonce === void 0 ? void 0 : _nonce.toString(16),\n                  pubNonce: pubNonce\n                });\n\n                if (isExtended) {\n                  _context8.next = 75;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", address);\n\n              case 75:\n                return _context8.abrupt(\"return\", {\n                  typeOfUser: typeOfUser,\n                  address: address,\n                  X: X,\n                  Y: Y,\n                  metadataNonce: nonce,\n                  pubNonce: pubNonce\n                });\n\n              case 76:\n                throw new Error(\"node results do not match at final lookup \".concat(JSON.stringify(keyResult || {}), \", \").concat(JSON.stringify(errorResult || {})));\n\n              case 77:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[38, 50]]);\n      }));\n\n      function getPublicAddress(_x17, _x18, _x19) {\n        return _getPublicAddress.apply(this, arguments);\n      }\n\n      return getPublicAddress;\n    }()\n    /**\n     * Internal functions for OneKey (OpenLogin v2), only call these functions if you know what you're doing\n     */\n\n  }, {\n    key: \"getOrSetNonce\",\n    value: function () {\n      var _getOrSetNonce = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(X, Y, privKey) {\n        var getOnly,\n            data,\n            msg,\n            _args9 = arguments;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                getOnly = _args9.length > 3 && _args9[3] !== undefined ? _args9[3] : false;\n                msg = getOnly ? 'getNonce' : 'getOrSetNonce';\n\n                if (privKey) {\n                  data = this.generateMetadataParams(msg, privKey);\n                } else {\n                  data = {\n                    pub_key_X: X,\n                    pub_key_Y: Y,\n                    set_data: {\n                      data: msg\n                    }\n                  };\n                }\n\n                return _context9.abrupt(\"return\", post(\"\".concat(this.metadataHost, \"/get_or_set_nonce\"), data, undefined, {\n                  useAPIKey: true\n                }));\n\n              case 4:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function getOrSetNonce(_x20, _x21, _x22) {\n        return _getOrSetNonce.apply(this, arguments);\n      }\n\n      return getOrSetNonce;\n    }()\n  }, {\n    key: \"getNonce\",\n    value: function () {\n      var _getNonce = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(X, Y, privKey) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                return _context10.abrupt(\"return\", this.getOrSetNonce(X, Y, privKey, true));\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function getNonce(_x23, _x24, _x25) {\n        return _getNonce.apply(this, arguments);\n      }\n\n      return getNonce;\n    }()\n  }, {\n    key: \"getPostboxKeyFrom1OutOf1\",\n    value: function getPostboxKeyFrom1OutOf1(privKey, nonce) {\n      var privKeyBN = new BN(privKey, 16);\n      var nonceBN = new BN(nonce, 16);\n      return privKeyBN.sub(nonceBN).umod(this.ec.curve.n).toString('hex');\n    }\n  }], [{\n    key: \"enableLogging\",\n    value: function enableLogging() {\n      var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (v) log.enableAll();else log.disableAll();\n    }\n  }, {\n    key: \"setAPIKey\",\n    value: function setAPIKey$1(apiKey) {\n      setAPIKey(apiKey);\n    }\n  }, {\n    key: \"setEmbedHost\",\n    value: function setEmbedHost$1(embedHost) {\n      setEmbedHost(embedHost);\n    }\n  }, {\n    key: \"isGetOrSetNonceError\",\n    value: function isGetOrSetNonceError(err) {\n      return err instanceof GetOrSetNonceError;\n    }\n  }]);\n\n  return Torus;\n}();\n\nexport { Torus as default, keyAssign, keyLookup, waitKeyLookup };\n//# sourceMappingURL=torusUtils.esm.js.map\n","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeError = exports.isValidCode = exports.getMessageFromCode = exports.JSON_RPC_SERVER_ERROR_MESSAGE = void 0;\nconst error_constants_1 = require(\"./error-constants\");\nconst classes_1 = require(\"./classes\");\nconst FALLBACK_ERROR_CODE = error_constants_1.errorCodes.rpc.internal;\nconst FALLBACK_MESSAGE = 'Unspecified error message. This is a bug, please report it.';\nconst FALLBACK_ERROR = {\n    code: FALLBACK_ERROR_CODE,\n    message: getMessageFromCode(FALLBACK_ERROR_CODE),\n};\nexports.JSON_RPC_SERVER_ERROR_MESSAGE = 'Unspecified server error.';\n/**\n * Gets the message for a given code, or a fallback message if the code has\n * no corresponding message.\n */\nfunction getMessageFromCode(code, fallbackMessage = FALLBACK_MESSAGE) {\n    if (Number.isInteger(code)) {\n        const codeString = code.toString();\n        if (hasKey(error_constants_1.errorValues, codeString)) {\n            return error_constants_1.errorValues[codeString].message;\n        }\n        if (isJsonRpcServerError(code)) {\n            return exports.JSON_RPC_SERVER_ERROR_MESSAGE;\n        }\n    }\n    return fallbackMessage;\n}\nexports.getMessageFromCode = getMessageFromCode;\n/**\n * Returns whether the given code is valid.\n * A code is only valid if it has a message.\n */\nfunction isValidCode(code) {\n    if (!Number.isInteger(code)) {\n        return false;\n    }\n    const codeString = code.toString();\n    if (error_constants_1.errorValues[codeString]) {\n        return true;\n    }\n    if (isJsonRpcServerError(code)) {\n        return true;\n    }\n    return false;\n}\nexports.isValidCode = isValidCode;\n/**\n * Serializes the given error to an Ethereum JSON RPC-compatible error object.\n * Merely copies the given error's values if it is already compatible.\n * If the given error is not fully compatible, it will be preserved on the\n * returned object's data.originalError property.\n */\nfunction serializeError(error, { fallbackError = FALLBACK_ERROR, shouldIncludeStack = false, } = {}) {\n    var _a, _b;\n    if (!fallbackError ||\n        !Number.isInteger(fallbackError.code) ||\n        typeof fallbackError.message !== 'string') {\n        throw new Error('Must provide fallback error with integer number code and string message.');\n    }\n    if (error instanceof classes_1.EthereumRpcError) {\n        return error.serialize();\n    }\n    const serialized = {};\n    if (error &&\n        typeof error === 'object' &&\n        !Array.isArray(error) &&\n        hasKey(error, 'code') &&\n        isValidCode(error.code)) {\n        const _error = error;\n        serialized.code = _error.code;\n        if (_error.message && typeof _error.message === 'string') {\n            serialized.message = _error.message;\n            if (hasKey(_error, 'data')) {\n                serialized.data = _error.data;\n            }\n        }\n        else {\n            serialized.message = getMessageFromCode(serialized.code);\n            serialized.data = { originalError: assignOriginalError(error) };\n        }\n    }\n    else {\n        serialized.code = fallbackError.code;\n        const message = (_a = error) === null || _a === void 0 ? void 0 : _a.message;\n        serialized.message = (message && typeof message === 'string'\n            ? message\n            : fallbackError.message);\n        serialized.data = { originalError: assignOriginalError(error) };\n    }\n    const stack = (_b = error) === null || _b === void 0 ? void 0 : _b.stack;\n    if (shouldIncludeStack && error && stack && typeof stack === 'string') {\n        serialized.stack = stack;\n    }\n    return serialized;\n}\nexports.serializeError = serializeError;\n// Internal\nfunction isJsonRpcServerError(code) {\n    return code >= -32099 && code <= -32000;\n}\nfunction assignOriginalError(error) {\n    if (error && typeof error === 'object' && !Array.isArray(error)) {\n        return Object.assign({}, error);\n    }\n    return error;\n}\nfunction hasKey(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsdURBQTREO0FBQzVELHVDQUF5RTtBQUV6RSxNQUFNLG1CQUFtQixHQUFHLDRCQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQUNwRCxNQUFNLGdCQUFnQixHQUFHLDZEQUE2RCxDQUFDO0FBQ3ZGLE1BQU0sY0FBYyxHQUErQjtJQUNqRCxJQUFJLEVBQUUsbUJBQW1CO0lBQ3pCLE9BQU8sRUFBRSxrQkFBa0IsQ0FBQyxtQkFBbUIsQ0FBQztDQUNqRCxDQUFDO0FBRVcsUUFBQSw2QkFBNkIsR0FBRywyQkFBMkIsQ0FBQztBQUl6RTs7O0dBR0c7QUFDSCxTQUFnQixrQkFBa0IsQ0FDaEMsSUFBWSxFQUNaLGtCQUEwQixnQkFBZ0I7SUFFMUMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQzFCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUVuQyxJQUFJLE1BQU0sQ0FBQyw2QkFBVyxFQUFFLFVBQVUsQ0FBQyxFQUFFO1lBQ25DLE9BQU8sNkJBQVcsQ0FBQyxVQUEyQixDQUFDLENBQUMsT0FBTyxDQUFDO1NBQ3pEO1FBQ0QsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUM5QixPQUFPLHFDQUE2QixDQUFDO1NBQ3RDO0tBQ0Y7SUFDRCxPQUFPLGVBQWUsQ0FBQztBQUN6QixDQUFDO0FBZkQsZ0RBZUM7QUFFRDs7O0dBR0c7QUFDSCxTQUFnQixXQUFXLENBQUMsSUFBWTtJQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUMzQixPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ25DLElBQUksNkJBQVcsQ0FBQyxVQUEy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","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind');\nvar aConstructor = require('../internals/a-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","'use strict';\nvar global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar isConstructor = require('../internals/is-constructor');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar Array = global.Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    result = IS_CONSTRUCTOR ? new this() : [];\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\ncollection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\nmodule.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {\n  if (!isObject(it)) return false;\n  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return false;\n  return $isExtensible ? $isExtensible(it) : true;\n} : $isExtensible;\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(Prototype, {\n      // `{ Map, Set }.prototype.clear()` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.clear\n      // https://tc39.es/ecma262/#sec-set.prototype.clear\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // `{ Map, Set }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.delete\n      // https://tc39.es/ecma262/#sec-set.prototype.delete\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // `{ Map, Set }.prototype.forEach(callbackfn, thisArg = undefined)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.foreach\n      // https://tc39.es/ecma262/#sec-set.prototype.foreach\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // `{ Map, Set}.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.has\n      // https://tc39.es/ecma262/#sec-set.prototype.has\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(Prototype, IS_MAP ? {\n      // `Map.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.get\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // `Map.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.set\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // `Set.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-set.prototype.add\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(Prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return Constructor;\n  },\n  setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // `{ Map, Set }.prototype.{ keys, values, entries, @@iterator }()` methods\n    // https://tc39.es/ecma262/#sec-map.prototype.entries\n    // https://tc39.es/ecma262/#sec-map.prototype.keys\n    // https://tc39.es/ecma262/#sec-map.prototype.values\n    // https://tc39.es/ecma262/#sec-map.prototype-@@iterator\n    // https://tc39.es/ecma262/#sec-set.prototype.entries\n    // https://tc39.es/ecma262/#sec-set.prototype.keys\n    // https://tc39.es/ecma262/#sec-set.prototype.values\n    // https://tc39.es/ecma262/#sec-set.prototype-@@iterator\n    defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // `{ Map, Set }.prototype[@@species]` accessors\n    // https://tc39.es/ecma262/#sec-get-map-@@species\n    // https://tc39.es/ecma262/#sec-get-set-@@species\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        uncurriedNativeMethod(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        uncurriedNativeMethod(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.enable();\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, NativePrototype);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ethErrors = void 0;\nconst classes_1 = require(\"./classes\");\nconst utils_1 = require(\"./utils\");\nconst error_constants_1 = require(\"./error-constants\");\nexports.ethErrors = {\n    rpc: {\n        /**\n         * Get a JSON RPC 2.0 Parse (-32700) error.\n         */\n        parse: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.parse, arg),\n        /**\n         * Get a JSON RPC 2.0 Invalid Request (-32600) error.\n         */\n        invalidRequest: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidRequest, arg),\n        /**\n         * Get a JSON RPC 2.0 Invalid Params (-32602) error.\n         */\n        invalidParams: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidParams, arg),\n        /**\n         * Get a JSON RPC 2.0 Method Not Found (-32601) error.\n         */\n        methodNotFound: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotFound, arg),\n        /**\n         * Get a JSON RPC 2.0 Internal (-32603) error.\n         */\n        internal: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.internal, arg),\n        /**\n         * Get a JSON RPC 2.0 Server error.\n         * Permits integer error codes in the [ -32099 <= -32005 ] range.\n         * Codes -32000 through -32004 are reserved by EIP-1474.\n         */\n        server: (opts) => {\n            if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n                throw new Error('Ethereum RPC Server errors must provide single object argument.');\n            }\n            const { code } = opts;\n            if (!Number.isInteger(code) || code > -32005 || code < -32099) {\n                throw new Error('\"code\" must be an integer such that: -32099 <= code <= -32005');\n            }\n            return getEthJsonRpcError(code, opts);\n        },\n        /**\n         * Get an Ethereum JSON RPC Invalid Input (-32000) error.\n         */\n        invalidInput: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidInput, arg),\n        /**\n         * Get an Ethereum JSON RPC Resource Not Found (-32001) error.\n         */\n        resourceNotFound: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceNotFound, arg),\n        /**\n         * Get an Ethereum JSON RPC Resource Unavailable (-32002) error.\n         */\n        resourceUnavailable: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceUnavailable, arg),\n        /**\n         * Get an Ethereum JSON RPC Transaction Rejected (-32003) error.\n         */\n        transactionRejected: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.transactionRejected, arg),\n        /**\n         * Get an Ethereum JSON RPC Method Not Supported (-32004) error.\n         */\n        methodNotSupported: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotSupported, arg),\n        /**\n         * Get an Ethereum JSON RPC Limit Exceeded (-32005) error.\n         */\n        limitExceeded: (arg) => getEthJsonRpcError(error_constants_1.errorCodes.rpc.limitExceeded, arg),\n    },\n    provider: {\n        /**\n         * Get an Ethereum Provider User Rejected Request (4001) error.\n         */\n        userRejectedRequest: (arg) => {\n            return getEthProviderError(error_constants_1.errorCodes.provider.userRejectedRequest, arg);\n        },\n        /**\n         * Get an Ethereum Provider Unauthorized (4100) error.\n         */\n        unauthorized: (arg) => {\n            return getEthProviderError(error_constants_1.errorCodes.provider.unauthorized, arg);\n        },\n        /**\n         * Get an Ethereum Provider Unsupported Method (4200) error.\n         */\n        unsupportedMethod: (arg) => {\n            return getEthProviderError(error_constants_1.errorCodes.provider.unsupportedMethod, arg);\n        },\n        /**\n         * Get an Ethereum Provider Not Connected (4900) error.\n         */\n        disconnected: (arg) => {\n            return getEthProviderError(error_constants_1.errorCodes.provider.disconnected, arg);\n        },\n        /**\n         * Get an Ethereum Provider Chain Not Connected (4901) error.\n         */\n        chainDisconnected: (arg) => {\n            return getEthProviderError(error_constants_1.errorCodes.provider.chainDisconnected, arg);\n        },\n        /**\n         * Get a custom Ethereum Provider error.\n         */\n        custom: (opts) => {\n            if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n                throw new Error('Ethereum Provider custom errors must provide single object argument.');\n            }\n            const { code, message, data } = opts;\n            if (!message || typeof message !== 'string') {\n                throw new Error('\"message\" must be a nonempty string');\n            }\n            return new classes_1.EthereumProviderError(code, message, data);\n        },\n    },\n};\n// Internal\nfunction getEthJsonRpcError(code, arg) {\n    const [message, data] = parseOpts(arg);\n    return new classes_1.EthereumRpcError(code, message || utils_1.getMessageFromCode(code), data);\n}\nfunction getEthProviderError(code, arg) {\n    const [message, data] = parseOpts(arg);\n    return new classes_1.EthereumProviderError(code, message || utils_1.getMessageFromCode(code), data);\n}\nfunction parseOpts(arg) {\n    if (arg) {\n        if (typeof arg === 'string') {\n            return [arg];\n        }\n        else if (typeof arg === 'object' && !Array.isArray(arg)) {\n            const { message, data } = arg;\n            if (message && typeof message !== 'string') {\n                throw new Error('Must specify string message.');\n            }\n            return [message || undefined, data];\n        }\n    }\n    return [];\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2Vycm9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx1Q0FBb0U7QUFDcEUsbUNBQTZDO0FBQzdDLHVEQUErQztBQWVsQyxRQUFBLFNBQVMsR0FBRztJQUN2QixHQUFHLEVBQUU7UUFFSDs7V0FFRztRQUNILEtBQUssRUFBRSxDQUFJLEdBQXFCLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUNyRCw0QkFBVSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUMxQjtRQUVEOztXQUVHO1FBQ0gsY0FBYyxFQUFFLENBQUksR0FBcUIsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQzlELDRCQUFVLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQ25DO1FBRUQ7O1dBRUc7UUFDSCxhQUFhLEVBQUUsQ0FBSSxHQUFxQixFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FDN0QsNEJBQVUsQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FDbEM7UUFFRDs7V0FFRztRQUNILGNBQWMsRUFBRSxDQUFJLEdBQXFCLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUM5RCw0QkFBVSxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsR0FBRyxDQUNuQztRQUVEOztXQUVHO1FBQ0gsUUFBUSxFQUFFLENBQUksR0FBcUIsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQ3hELDRCQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQzdCO1FBRUQ7Ozs7V0FJRztRQUNILE1BQU0sRUFBRSxDQUFJLElBQTJCLEVBQUUsRUFBRTtZQUN6QyxJQUFJLENBQUMsSUFBSSxJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUM1RCxNQUFNLElBQUksS0FBSyxDQUFDLGlFQUFpRSxDQUFDLENBQUM7YUFDcEY7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","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservableStore = void 0;\nconst safe_event_emitter_1 = __importDefault(require(\"@metamask/safe-event-emitter\"));\nclass ObservableStore extends safe_event_emitter_1.default {\n    constructor(initState) {\n        super();\n        if (initState) {\n            this._state = initState;\n        }\n        else {\n            // Typecast/default state: Preserve existing behavior\n            this._state = {};\n        }\n    }\n    // wrapper around internal getState\n    getState() {\n        return this._getState();\n    }\n    // wrapper around internal putState\n    putState(newState) {\n        this._putState(newState);\n        this.emit('update', newState);\n    }\n    updateState(partialState) {\n        // if non-null object, merge\n        if (partialState && typeof partialState === 'object') {\n            const state = this.getState();\n            this.putState(Object.assign(Object.assign({}, state), partialState));\n            // if not object, use new value\n        }\n        else {\n            this.putState(partialState);\n        }\n    }\n    // subscribe to changes\n    subscribe(handler) {\n        this.on('update', handler);\n    }\n    // unsubscribe to changes\n    unsubscribe(handler) {\n        this.removeListener('update', handler);\n    }\n    //\n    // private\n    //\n    // read from persistence\n    _getState() {\n        return this._state;\n    }\n    // write to persistence\n    _putState(newState) {\n        this._state = newState;\n    }\n}\nexports.ObservableStore = ObservableStore;\n//# sourceMappingURL=ObservableStore.js.map","import Web3EthContract from 'web3-eth-contract';\nimport { toHex } from 'web3-utils';\n\nconst ETHEREUM_NETWORK = {\n    ROPSTEN: \"ropsten\",\n    MAINNET: \"mainnet\",\n};\nconst abi = [\n    {\n        constant: true,\n        inputs: [],\n        name: \"currentEpoch\",\n        outputs: [\n            {\n                internalType: \"uint256\",\n                name: \"\",\n                type: \"uint256\",\n            },\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\",\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                internalType: \"uint256\",\n                name: \"epoch\",\n                type: \"uint256\",\n            },\n        ],\n        name: \"getEpochInfo\",\n        outputs: [\n            {\n                internalType: \"uint256\",\n                name: \"id\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"n\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"k\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"t\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"address[]\",\n                name: \"nodeList\",\n                type: \"address[]\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"prevEpoch\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"nextEpoch\",\n                type: \"uint256\",\n            },\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\",\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                internalType: \"address\",\n                name: \"nodeAddress\",\n                type: \"address\",\n            },\n        ],\n        name: \"getNodeDetails\",\n        outputs: [\n            {\n                internalType: \"string\",\n                name: \"declaredIp\",\n                type: \"string\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"position\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"pubKx\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"uint256\",\n                name: \"pubKy\",\n                type: \"uint256\",\n            },\n            {\n                internalType: \"string\",\n                name: \"tmP2PListenAddress\",\n                type: \"string\",\n            },\n            {\n                internalType: \"string\",\n                name: \"p2pListenAddress\",\n                type: \"string\",\n            },\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\",\n    },\n];\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nclass NodeDetailManager {\n    constructor({ network = ETHEREUM_NETWORK.MAINNET, proxyAddress = \"0x638646503746d5456209e33a2ff5e3226d698bea\" } = {}) {\n        this._currentEpoch = \"19\";\n        this._torusNodeEndpoints = [\n            \"https://torus-19.torusnode.com/jrpc\",\n            \"https://torus-node.ens.domains/jrpc\",\n            \"https://torus-node.matic.network/jrpc\",\n            \"https://torus.zilliqa.network/jrpc\",\n            \"https://torus-mainnet.cosmos.network/jrpc\",\n            \"https://torus2.etherscan.com/jrpc\",\n            \"https://torus-node-v2.skalelabs.com/jrpc\",\n            \"https://torus-node.binancex.dev/jrpc\",\n            \"https://torusnode.ont.io/jrpc\",\n        ];\n        this._torusNodePub = [\n            {\n                X: \"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b\",\n                Y: \"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5\",\n            },\n            {\n                X: \"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d\",\n                Y: \"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873\",\n            },\n            {\n                X: \"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe\",\n                Y: \"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152\",\n            },\n            {\n                X: \"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768\",\n                Y: \"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef\",\n            },\n            {\n                X: \"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064\",\n                Y: \"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1\",\n            },\n            {\n                X: \"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139\",\n                Y: \"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122\",\n            },\n            {\n                X: \"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6\",\n                Y: \"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9\",\n            },\n            {\n                X: \"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043\",\n                Y: \"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46\",\n            },\n            {\n                X: \"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5\",\n                Y: \"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790\",\n            },\n        ];\n        this._torusIndexes = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n        this._network = ETHEREUM_NETWORK.MAINNET;\n        let url;\n        try {\n            const localUrl = new URL(network);\n            url = localUrl.href;\n        }\n        catch (_) {\n            const projectId = \"b8cdb0e4cff24599a286bf8e87ff1c96\";\n            url = `https://${network}.infura.io/v3/${projectId}`;\n        }\n        Web3EthContract.setProvider(url);\n        this.nodeListContract = new Web3EthContract(abi, proxyAddress);\n        this.nodeListAddress = proxyAddress;\n        this.updated = false;\n        this._network = network;\n    }\n    get _nodeDetails() {\n        return {\n            currentEpoch: this._currentEpoch,\n            nodeListAddress: this.nodeListAddress,\n            torusNodeEndpoints: this._torusNodeEndpoints,\n            torusNodePub: this._torusNodePub,\n            torusIndexes: this._torusIndexes,\n            updated: this.updated,\n        };\n    }\n    getCurrentEpoch() {\n        return this.nodeListContract.methods.currentEpoch().call();\n    }\n    getEpochInfo(epoch) {\n        return this.nodeListContract.methods.getEpochInfo(epoch).call();\n    }\n    getNodeEndpoint(nodeEthAddress) {\n        return this.nodeListContract.methods.getNodeDetails(nodeEthAddress).call();\n    }\n    getNodeDetails(skip = false, skipPostEpochCheck = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (skip && this._network === ETHEREUM_NETWORK.MAINNET)\n                    return this._nodeDetails;\n                if (this.updated)\n                    return this._nodeDetails;\n                const latestEpoch = yield this.getCurrentEpoch();\n                if (skipPostEpochCheck && this._network === ETHEREUM_NETWORK.MAINNET && latestEpoch === this._currentEpoch)\n                    return this._nodeDetails;\n                this._currentEpoch = latestEpoch;\n                const latestEpochInfo = yield this.getEpochInfo(latestEpoch);\n                const indexes = latestEpochInfo.nodeList.map((_, pos) => pos + 1);\n                this._torusIndexes = indexes;\n                const nodeEndpointRequests = latestEpochInfo.nodeList.map((nodeEthAddress) => this.getNodeEndpoint(nodeEthAddress));\n                const nodeEndPoints = yield Promise.all(nodeEndpointRequests);\n                const updatedEndpoints = [];\n                const updatedNodePub = [];\n                for (let index = 0; index < nodeEndPoints.length; index += 1) {\n                    const endPointElement = nodeEndPoints[index];\n                    const endpoint = `https://${endPointElement.declaredIp.split(\":\")[0]}/jrpc`;\n                    updatedEndpoints.push(endpoint);\n                    updatedNodePub.push({ X: toHex(endPointElement.pubKx).replace(\"0x\", \"\"), Y: toHex(endPointElement.pubKy).replace(\"0x\", \"\") });\n                }\n                this._torusNodeEndpoints = updatedEndpoints;\n                this._torusNodePub = updatedNodePub;\n                this.updated = true;\n                return this._nodeDetails;\n            }\n            catch (_) {\n                return this._nodeDetails;\n            }\n        });\n    }\n}\n\nexport { ETHEREUM_NETWORK, abi, NodeDetailManager as default };\n//# sourceMappingURL=fetchNodeDetails.esm.js.map\n","export function isStream(stream) {\n\treturn stream !== null\n\t\t&& typeof stream === 'object'\n\t\t&& typeof stream.pipe === 'function';\n}\n\nexport function isWritableStream(stream) {\n\treturn isStream(stream)\n\t\t&& stream.writable !== false\n\t\t&& typeof stream._write === 'function'\n\t\t&& typeof stream._writableState === 'object';\n}\n\nexport function isReadableStream(stream) {\n\treturn isStream(stream)\n\t\t&& stream.readable !== false\n\t\t&& typeof stream._read === 'function'\n\t\t&& typeof stream._readableState === 'object';\n}\n\nexport function isDuplexStream(stream) {\n\treturn isWritableStream(stream)\n\t\t&& isReadableStream(stream);\n}\n\nexport function isTransformStream(stream) {\n\treturn isDuplexStream(stream)\n\t\t&& typeof stream._transform === 'function';\n}\n","import _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport NodeDetailManager from '@toruslabs/fetch-node-details';\nimport { get, setAPIKey } from '@toruslabs/http-helpers';\nimport { SafeEventEmitter, ObjectMultiplex, createStreamMiddleware, JRPCEngine, createIdRemapMiddleware, BasePostMessageStream, setupMultiplex } from '@toruslabs/openlogin-jrpc';\nimport TorusJs from '@toruslabs/torus.js';\nimport deepmerge from 'lodash.merge';\nimport { ObservableStore, storeAsStream } from '@metamask/obs-store';\nimport { ethErrors, EthereumRpcError } from 'eth-rpc-errors';\nimport dequal from 'fast-deep-equal';\nimport { isDuplexStream } from 'is-stream';\nimport pump from 'pump';\nimport loglevel from 'loglevel';\nimport createHash from 'create-hash';\nimport { EventEmitter } from 'events';\n\nconst LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  TWITCH: \"twitch\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\"\n};\nconst WALLET_OPENLOGIN_VERIFIER_MAP = {\n  [LOGIN_PROVIDER.GOOGLE]: \"tkey-google\",\n  [LOGIN_PROVIDER.FACEBOOK]: \"tkey-facebook\",\n  [LOGIN_PROVIDER.TWITCH]: \"tkey-twitch\",\n  [LOGIN_PROVIDER.REDDIT]: \"tkey-reddit\",\n  [LOGIN_PROVIDER.DISCORD]: \"tkey-discord\"\n};\nconst PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\"\n};\nconst TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  BINANCE: \"binance\",\n  TESTING: \"testing\",\n  LRC: \"lrc\",\n  BETA: \"beta\"\n};\nconst BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\"\n};\n\nconst paymentProviders$1 = {\n  [PAYMENT_PROVIDER.RAMPNETWORK]: {\n    line1: \"Debit Card/ Apple Pay/ Bank transfer\",\n    line2: \"0.49% - 2.9%\",\n    line3: \"5,000/purchase, 20,000/mo\",\n    supportPage: \"https://instant.ramp.network/\",\n    minOrderValue: 50,\n    maxOrderValue: 20000,\n    validCurrencies: [\"GBP\", \"EUR\", \"USD\"],\n    validCryptoCurrencies: [\"ETH\", \"DAI\", \"USDC\", \"BSC_BNB\"],\n    includeFees: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.MOONPAY]: {\n    line1: \"Credit / Debit Card / Apple Pay\",\n    line2: \"4.5% or 5 USD\",\n    line3: \"2,000/day, 10,000/mo\",\n    supportPage: \"https://help.moonpay.io/en/\",\n    minOrderValue: 24.99,\n    maxOrderValue: 50000,\n    validCurrencies: [\"USD\", \"EUR\", \"GBP\", \"AUD\", \"CAD\", \"SGD\", \"RUB\"],\n    validCryptoCurrencies: [\"ETH\", \"DAI\", \"TUSD\", \"USDC\", \"USDT\", \"BNB_BSC\", \"BUSD_BSC\"],\n    includeFees: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.WYRE]: {\n    line1: \"Apple Pay/ Debit/ Credit Card\",\n    line2: \"4.9% + 30 or 5 USD\",\n    line3: \"$250/day\",\n    supportPage: \"https://support.sendwyre.com/en/\",\n    minOrderValue: 5,\n    maxOrderValue: 500,\n    validCurrencies: [\"USD\", \"AUD\", \"CAD\", \"GBP\", \"EUR\"],\n    validCryptoCurrencies: [\"ETH\", \"DAI\", \"USDC\", \"USDT\"],\n    includeFees: false,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.XANPOOL]: {\n    line1: \"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ VietelPay/ DuitNow\",\n    line2: \"2.5% buying, 3% selling\",\n    line3: \"$2,500 / day\",\n    supportPage: \"mailto:support@xanpool.com\",\n    minOrderValue: 100,\n    maxOrderValue: 2500,\n    validCurrencies: [\"SGD\", \"HKD\", \"MYR\", \"PHP\", \"INR\", \"VND\", \"THB\", \"IDR\"],\n    validCryptoCurrencies: [\"ETH\", \"USDT\"],\n    includeFees: true,\n    sell: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.MERCURYO]: {\n    line1: \"Credit/ Debit Card/ Apple Pay\",\n    line2: \"3.95% or 4 USD\",\n    line3: \"10,000/day, 25,000/mo\",\n    supportPage: \"mailto:support@mercuryo.io\",\n    minOrderValue: 30,\n    maxOrderValue: 5000,\n    validCurrencies: [\"USD\", \"EUR\", \"RUB\", \"TRY\", \"GBP\", \"UAH\"],\n    validCryptoCurrencies: [\"ETH\", \"DAI\", \"BAT\", \"USDT\", \"OKB\"],\n    includeFees: true,\n    enforceMax: false\n  },\n  [PAYMENT_PROVIDER.TRANSAK]: {\n    line1: \"Credit/ Debit Card/ <br/>Bank Transfer (sepa/gbp)\",\n    line2: \"0.99% - 5.5% or 5 USD\",\n    line3: \"500/day\",\n    supportPage: \"https://support.transak.com/hc/en-US\",\n    minOrderValue: 20,\n    maxOrderValue: 500,\n    validCurrencies: [\"USD\", \"EUR\", \"GBP\", \"AUD\", \"CAD\", \"SGD\"],\n    validCryptoCurrencies: [\"ETH\", \"DAI\", \"USDC\", \"USDT\"],\n    includeFees: true,\n    enforceMax: false\n  }\n};\nconst translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\"\n    }\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies bentigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\"\n    }\n  },\n  ja: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"\",\n      enableCookies: \"TorusCookie\",\n      clickHere: \"\"\n    }\n  },\n  ko: {\n    embed: {\n      continue: \"\",\n      actionRequired: \" \",\n      pendingAction: \"    .\",\n      cookiesRequired: \" \",\n      enableCookies: \"     Torus .\",\n      clickHere: \"  \"\n    }\n  },\n  zh: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"Cookie\",\n      enableCookies: \"cookieTorus\",\n      clickHere: \"\"\n    }\n  }\n};\nvar configuration = {\n  supportedVerifierList: [LOGIN_PROVIDER.GOOGLE, LOGIN_PROVIDER.REDDIT, LOGIN_PROVIDER.DISCORD],\n  paymentProviders: paymentProviders$1,\n  api: \"https://api.tor.us\",\n  translations,\n  prodTorusUrl: \"\",\n  localStorageKey: \"torus-\".concat(window.location.hostname)\n};\n\nconst runOnLoad = fn => new Promise((resolve, reject) => {\n  if (window.document.body != null) {\n    Promise.resolve(fn()).then(resolve).catch(reject);\n  } else {\n    window.document.addEventListener(\"DOMContentLoaded\", () => {\n      Promise.resolve(fn()).then(resolve).catch(reject);\n    });\n  }\n});\nconst htmlToElement = html => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild;\n};\nconst handleEvent = function (handle, eventName, handler) {\n  for (var _len = arguments.length, handlerArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    handlerArgs[_key - 3] = arguments[_key];\n  }\n\n  const handlerWrapper = () => {\n    handler(...handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n\n  handle.addEventListener(eventName, handlerWrapper);\n};\nconst handleStream = (handle, eventName, handler) => {\n  const handlerWrapper = chunk => {\n    handler(chunk);\n    handle.removeListener(eventName, handlerWrapper);\n  };\n\n  handle.on(eventName, handlerWrapper);\n};\nasync function documentReady() {\n  return new Promise(resolve => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      handleEvent(document, \"DOMContentLoaded\", resolve);\n    }\n  });\n}\n\nvar log = loglevel.getLogger(\"torus-embed\");\n\nvar messages = {\n  errors: {\n    disconnected: () => \"Torus: Lost connection to Torus.\",\n    permanentlyDisconnected: () => \"Torus: Disconnected from iframe. Page reload required.\",\n    sendSiteMetadata: () => \"Torus: Failed to send site metadata. This is an internal error, please report this bug.\",\n    unsupportedSync: method => \"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(method, \" without a callback parameter.\"),\n    invalidDuplexStream: () => \"Must provide a Node.js-style duplex stream.\",\n    invalidOptions: (maxEventListeners, shouldSendMetadata) => \"Invalid options. Received: { maxEventListeners: \".concat(maxEventListeners, \", shouldSendMetadata: \").concat(shouldSendMetadata, \" }\"),\n    invalidRequestArgs: () => \"Expected a single, non-array, object argument.\",\n    invalidRequestMethod: () => \"'args.method' must be a non-empty string.\",\n    invalidRequestParams: () => \"'args.params' must be an object or array if provided.\",\n    invalidLoggerObject: () => \"'args.logger' must be an object if provided.\",\n    invalidLoggerMethod: method => \"'args.logger' must include required method '\".concat(method, \"'.\")\n  },\n  info: {\n    connected: chainId => \"Torus: Connected to chain with ID \\\"\".concat(chainId, \"\\\".\")\n  },\n  warnings: {\n    // deprecated methods\n    enableDeprecation: 'Torus: \"\"ethereum.enable()\" is deprecated and may be removed in the future. ' + 'Please use \"ethereum.send(\"eth_requestAccounts\")\" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',\n    sendDeprecation: 'Torus: \"ethereum.send(...)\" is deprecated and may be removed in the future.' + ' Please use \"ethereum.sendAsync(...)\" or \"ethereum.request(...)\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n    events: {\n      close: 'Torus: The event \"close\" is deprecated and may be removed in the future. Please use \"disconnect\" instead.' + \"\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193\",\n      data: 'Torus: The event \"data\" is deprecated and will be removed in the future.' + 'Use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',\n      networkChanged: 'Torus: The event \"networkChanged\" is deprecated and may be removed in the future.' + ' Please use \"chainChanged\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',\n      notification: 'Torus: The event \"notification\" is deprecated and may be removed in the future. ' + 'Please use \"message\" instead.\\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'\n    },\n    publicConfigStore: 'Torus: The property \"publicConfigStore\" is deprecated and WILL be removed in the future.'\n  }\n};\n\nconst {\n  paymentProviders\n} = configuration;\nconst validatePaymentProvider = (provider, params) => {\n  const errors = {};\n\n  if (!provider) {\n    return {\n      errors,\n      isValid: true\n    };\n  }\n\n  if (provider && !paymentProviders[provider]) {\n    errors.provider = \"Invalid Provider\";\n    return {\n      errors,\n      isValid: Object.keys(errors).length === 0\n    };\n  }\n\n  const selectedProvider = paymentProviders[provider];\n  const selectedParams = params || {}; // set default values\n  // if (!selectedParams.selectedCurrency) [selectedParams.selectedCurrency] = selectedProvider.validCurrencies\n  // if (!selectedParams.fiatValue) selectedParams.fiatValue = selectedProvider.minOrderValue\n  // if (!selectedParams.selectedCryptoCurrency) [selectedParams.selectedCryptoCurrency] = selectedProvider.validCryptoCurrencies\n  // validations\n\n  if (selectedParams.fiatValue) {\n    const requestedOrderAmount = +parseFloat(selectedParams.fiatValue.toString()) || 0;\n    if (requestedOrderAmount < selectedProvider.minOrderValue) errors.fiatValue = \"Requested amount is lower than supported\";\n    if (requestedOrderAmount > selectedProvider.maxOrderValue && selectedProvider.enforceMax) errors.fiatValue = \"Requested amount is higher than supported\";\n  }\n\n  if (selectedParams.selectedCurrency && !selectedProvider.validCurrencies.includes(selectedParams.selectedCurrency)) {\n    errors.selectedCurrency = \"Unsupported currency\";\n  }\n\n  if (selectedParams.selectedCryptoCurrency && !selectedProvider.validCryptoCurrencies.includes(selectedParams.selectedCryptoCurrency)) {\n    errors.selectedCryptoCurrency = \"Unsupported cryptoCurrency\";\n  }\n\n  return {\n    errors,\n    isValid: Object.keys(errors).length === 0\n  };\n}; // utility functions\n\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\n\nfunction createErrorMiddleware() {\n  return (req, res, next) => {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = ethErrors.rpc.invalidRequest({\n        message: \"The request 'method' must be a non-empty string.\",\n        data: req\n      });\n    }\n\n    next(done => {\n      const {\n        error\n      } = res;\n\n      if (!error) {\n        return done();\n      }\n\n      log.error(\"MetaMask - RPC Error: \".concat(error.message), error);\n      return done();\n    });\n  };\n} // resolve response.result or response, reject errors\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\n\nfunction logStreamDisconnectWarning(remoteLabel, error, emitter) {\n  let warningMsg = \"MetaMask: Lost connection to \\\"\".concat(remoteLabel, \"\\\".\");\n\n  if (error !== null && error !== void 0 && error.stack) {\n    warningMsg += \"\\n\".concat(error.stack);\n  }\n\n  log.warn(warningMsg);\n\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\nconst getPreopenInstanceId = () => Math.random().toString(36).slice(2);\nconst getTorusUrl = async (buildEnv, integrity) => {\n  let torusUrl;\n  let logLevel; // Do not change this line\n\n  const version = \"1.20.4\";\n  let versionUsed = integrity.version || version;\n\n  try {\n    if ((buildEnv === \"binance\" || buildEnv === \"production\") && !integrity.version) {\n      let response;\n      if (!configuration.prodTorusUrl) response = await get(\"\".concat(configuration.api, \"/latestversion?name=@toruslabs/torus-embed&version=\").concat(version), {}, {\n        useAPIKey: true\n      });else response = {\n        data: configuration.prodTorusUrl\n      };\n      versionUsed = response.data; // eslint-disable-next-line require-atomic-updates\n\n      configuration.prodTorusUrl = response.data;\n    }\n  } catch (error) {\n    log.error(error, \"unable to fetch latest version\");\n  }\n\n  log.info(\"version used: \", versionUsed);\n\n  switch (buildEnv) {\n    case \"binance\":\n      torusUrl = \"https://binance.tor.us/v\".concat(versionUsed);\n      logLevel = \"info\";\n      break;\n\n    case \"testing\":\n      torusUrl = \"https://testing.tor.us\";\n      logLevel = \"debug\";\n      break;\n\n    case \"lrc\":\n      torusUrl = \"https://lrc.tor.us\";\n      logLevel = \"debug\";\n      break;\n\n    case \"beta\":\n      torusUrl = \"https://beta.tor.us\";\n      logLevel = \"debug\";\n      break;\n\n    case \"development\":\n      torusUrl = \"http://localhost:4050\";\n      logLevel = \"debug\";\n      break;\n\n    default:\n      torusUrl = \"https://app.tor.us/v\".concat(versionUsed);\n      logLevel = \"error\";\n      break;\n  }\n\n  return {\n    torusUrl,\n    logLevel\n  };\n};\nconst getUserLanguage = () => {\n  let userLanguage = window.navigator.language || \"en-US\";\n  const userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(configuration.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\nconst EMITTED_NOTIFICATIONS = [\"eth_subscription\" // per eth-json-rpc-filters/subscriptionManager\n];\nconst NOOP = () => {// empty function\n};\nconst FEATURES_PROVIDER_CHANGE_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375\";\nconst FEATURES_DEFAULT_WALLET_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315\";\nconst FEATURES_CONFIRM_WINDOW = \"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450\";\nfunction storageAvailable(type) {\n  let storage;\n\n  try {\n    storage = window[type];\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e && ( // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === \"QuotaExceededError\" || // Firefox\n    e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\nfunction getPopupFeatures() {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  const w = 1200;\n  const h = 700;\n  const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = \"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(h / systemZoom, \",width=\").concat(w / systemZoom, \",top=\").concat(top, \",left=\").concat(left);\n  return features;\n}\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nSafeEventEmitter.defaultMaxListeners = 100; // resolve response.result, reject errors\n\nconst getRpcPromiseCallback = function (resolve, reject) {\n  let unwrapResult = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return (error, response) => {\n    if (error || response.error) {\n      return reject(error || response.error);\n    }\n\n    return !unwrapResult || Array.isArray(response) ? resolve(response) : resolve(response.result);\n  };\n};\n\nclass TorusInpageProvider extends SafeEventEmitter {\n  /**\n   * The chain ID of the currently connected Ethereum chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n\n  /**\n   * The user's currently selected Ethereum address.\n   * If null, MetaMask is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n\n  /**\n   * Indicating that this provider is a MetaMask provider.\n   */\n  constructor(connectionStream) {\n    let {\n      maxEventListeners = 100,\n      shouldSendMetadata = true,\n      jsonRpcStreamName = \"provider\"\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n\n    _defineProperty(this, \"chainId\", void 0);\n\n    _defineProperty(this, \"selectedAddress\", void 0);\n\n    _defineProperty(this, \"_rpcEngine\", void 0);\n\n    _defineProperty(this, \"networkVersion\", void 0);\n\n    _defineProperty(this, \"shouldSendMetadata\", void 0);\n\n    _defineProperty(this, \"isTorus\", void 0);\n\n    _defineProperty(this, \"_publicConfigStore\", void 0);\n\n    _defineProperty(this, \"tryPreopenHandle\", void 0);\n\n    _defineProperty(this, \"enable\", void 0);\n\n    _defineProperty(this, \"_state\", void 0);\n\n    _defineProperty(this, \"_jsonRpcConnection\", void 0);\n\n    _defineProperty(this, \"_sentWarnings\", {\n      // methods\n      enable: false,\n      experimentalMethods: false,\n      send: false,\n      publicConfigStore: false,\n      // events\n      events: {\n        close: false,\n        data: false,\n        networkChanged: false,\n        notification: false\n      }\n    });\n\n    if (!isDuplexStream(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n\n    this.isTorus = true;\n    this.setMaxListeners(maxEventListeners); // private state\n\n    this._state = _objectSpread$1({}, TorusInpageProvider._defaultState); // public state\n\n    this.selectedAddress = null;\n    this.networkVersion = null;\n    this.chainId = null;\n    this.shouldSendMetadata = shouldSendMetadata; // bind functions (to prevent e.g. web3@1.x from making unbound calls)\n\n    this._handleAccountsChanged = this._handleAccountsChanged.bind(this);\n    this._handleChainChanged = this._handleChainChanged.bind(this);\n    this._handleUnlockStateChanged = this._handleUnlockStateChanged.bind(this);\n    this._handleConnect = this._handleConnect.bind(this);\n    this._handleDisconnect = this._handleDisconnect.bind(this);\n    this._handleStreamDisconnect = this._handleStreamDisconnect.bind(this);\n    this._sendSync = this._sendSync.bind(this);\n    this._rpcRequest = this._rpcRequest.bind(this);\n    this._warnOfDeprecation = this._warnOfDeprecation.bind(this);\n    this._initializeState = this._initializeState.bind(this);\n    this.request = this.request.bind(this);\n    this.send = this.send.bind(this);\n    this.sendAsync = this.sendAsync.bind(this); // this.enable = this.enable.bind(this);\n    // setup connectionStream multiplexing\n\n    const mux = new ObjectMultiplex();\n    pump(connectionStream, mux, connectionStream, this._handleStreamDisconnect.bind(this, \"MetaMask\")); // subscribe to metamask public config (one-way)\n\n    this._publicConfigStore = new ObservableStore({\n      storageKey: \"Metamask-Config\"\n    }); // handle isUnlocked changes, and chainChanged and networkChanged events\n    // this._publicConfigStore.subscribe((stringifiedState) => {\n    //   // This is because we are using store as string\n    //   const state = JSON.parse(stringifiedState as unknown as string);\n    //   if (\"isUnlocked\" in state && state.isUnlocked !== this._state.isUnlocked) {\n    //     this._state.isUnlocked = state.isUnlocked;\n    //     if (!this._state.isUnlocked) {\n    //       // accounts are never exposed when the extension is locked\n    //       this._handleAccountsChanged([]);\n    //     } else {\n    //       // this will get the exposed accounts, if any\n    //       try {\n    //         this._rpcRequest(\n    //           { method: \"eth_accounts\", params: [] },\n    //           NOOP,\n    //           true // indicating that eth_accounts _should_ update accounts\n    //         );\n    //       } catch (_) {\n    //         // Swallow error\n    //       }\n    //     }\n    //   }\n    //   if (\"selectedAddress\" in state && this.selectedAddress !== state.selectedAddress) {\n    //     try {\n    //       this._rpcRequest(\n    //         { method: \"eth_accounts\", params: [] },\n    //         NOOP,\n    //         true // indicating that eth_accounts _should_ update accounts\n    //       );\n    //     } catch (_) {\n    //       // Swallow error\n    //     }\n    //   }\n    //   // Emit chainChanged event on chain change\n    //   if (\"chainId\" in state && state.chainId !== this.chainId) {\n    //     this.chainId = state.chainId || null;\n    //     this.emit(\"chainChanged\", this.chainId);\n    //     // indicate that we've connected, for EIP-1193 compliance\n    //     // we do this here so that iframe can initialize\n    //     if (!this._state.hasEmittedConnection) {\n    //       this._handleConnect(this.chainId);\n    //       this._state.hasEmittedConnection = true;\n    //     }\n    //   }\n    //   // Emit networkChanged event on network change\n    //   if (\"networkVersion\" in state && state.networkVersion !== this.networkVersion) {\n    //     this.networkVersion = state.networkVersion || null;\n    //     this.emit(\"networkChanged\", this.networkVersion);\n    //   }\n    // });\n\n    pump(mux.createStream(\"publicConfig\"), storeAsStream(this._publicConfigStore), // RPC requests should still work if only this stream fails\n    logStreamDisconnectWarning.bind(this, \"MetaMask PublicConfigStore\")); // ignore phishing warning message (handled elsewhere)\n\n    mux.ignoreStream(\"phishing\"); // setup own event listeners\n    // EIP-1193 connect\n\n    this.on(\"connect\", () => {\n      this._state.isConnected = true;\n    }); // connect to async provider\n\n    const jsonRpcConnection = createStreamMiddleware();\n    pump(jsonRpcConnection.stream, mux.createStream(jsonRpcStreamName), jsonRpcConnection.stream, this._handleStreamDisconnect.bind(this, \"MetaMask RpcProvider\")); // handle RPC requests via dapp-side rpc engine\n\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(jsonRpcConnection.middleware);\n    this._rpcEngine = rpcEngine; // json rpc notification listener\n\n    jsonRpcConnection.events.on(\"notification\", payload => {\n      const {\n        method,\n        params\n      } = payload;\n\n      if (method === \"wallet_accountsChanged\") {\n        this._handleAccountsChanged(params);\n      } else if (method === \"wallet_unlockStateChanged\") {\n        this._handleUnlockStateChanged(params);\n      } else if (method === \"wallet_chainChanged\") {\n        this._handleChainChanged(params);\n      } else if (EMITTED_NOTIFICATIONS.includes(payload.method)) {\n        // EIP 1193 subscriptions, per eth-json-rpc-filters/subscriptionManager\n        this.emit(\"data\", payload); // deprecated\n\n        this.emit(\"notification\", params.result);\n        this.emit(\"message\", {\n          type: method,\n          data: params\n        });\n      } // Backward compatibility for older non EIP 1193 subscriptions\n      // this.emit('data', null, payload)\n\n    });\n  }\n\n  get publicConfigStore() {\n    if (!this._sentWarnings.publicConfigStore) {\n      log.warn(messages.warnings.publicConfigStore);\n      this._sentWarnings.publicConfigStore = true;\n    }\n\n    return this._publicConfigStore;\n  }\n  /**\n   * Returns whether the inpage provider is connected to Torus.\n   */\n\n\n  isConnected() {\n    return this._state.isConnected;\n  }\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   * Resolves with the result of the method call, or rejects on error.\n   *\n   * @param args - The RPC request arguments.\n   * @returns A Promise that resolves with the result of the RPC method,\n   * or rejects if an error is encountered.\n   */\n\n\n  async request(args) {\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestArgs(),\n        data: args\n      });\n    }\n\n    const {\n      method,\n      params\n    } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestMethod(),\n        data: args\n      });\n    }\n\n    if (params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestParams(),\n        data: args\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      this._rpcRequest({\n        method,\n        params\n      }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   *\n   * @param payload - The RPC request object.\n   * @param cb - The callback function.\n   */\n\n\n  sendAsync(payload, callback) {\n    this._rpcRequest(payload, callback);\n  }\n  /**\n   * We override the following event methods so that we can warn consumers\n   * about deprecated events:\n   *   addListener, on, once, prependListener, prependOnceListener\n   */\n\n\n  addListener(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n\n    return super.addListener(eventName, listener);\n  }\n\n  on(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n\n    return super.on(eventName, listener);\n  }\n\n  once(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n\n    return super.once(eventName, listener);\n  }\n\n  prependListener(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n\n    return super.prependListener(eventName, listener);\n  }\n\n  prependOnceListener(eventName, listener) {\n    this._warnOfDeprecation(eventName);\n\n    return super.prependOnceListener(eventName, listener);\n  } // Private Methods\n  //= ===================\n\n  /**\n   * Constructor helper.\n   * Populates initial state by calling 'wallet_getProviderState' and emits\n   * necessary events.\n   */\n\n\n  async _initializeState() {\n    try {\n      const {\n        accounts,\n        chainId,\n        isUnlocked,\n        networkVersion\n      } = await this.request({\n        method: \"wallet_getProviderState\"\n      }); // indicate that we've connected, for EIP-1193 compliance\n\n      this.emit(\"connect\", {\n        chainId\n      });\n\n      this._handleChainChanged({\n        chainId,\n        networkVersion\n      });\n\n      this._handleUnlockStateChanged({\n        accounts,\n        isUnlocked\n      });\n\n      this._handleAccountsChanged(accounts);\n    } catch (error) {\n      log.error(\"MetaMask: Failed to get initial state. Please report this bug.\", error);\n    } finally {\n      log.info(\"initialized state\");\n      this._state.initialized = true;\n      this.emit(\"_initialized\");\n    }\n  }\n  /**\n   * Internal RPC method. Forwards requests to background via the RPC engine.\n   * Also remap ids inbound and outbound.\n   *\n   * @param payload - The RPC request object.\n   * @param callback - The consumer's callback.\n   * @param isInternal - false - Whether the request is internal.\n   */\n\n\n  _rpcRequest(payload, callback) {\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let cb = callback;\n    const _payload = payload;\n\n    if (!Array.isArray(_payload)) {\n      if (!_payload.jsonrpc) {\n        _payload.jsonrpc = \"2.0\";\n      }\n\n      if (_payload.method === \"eth_accounts\" || _payload.method === \"eth_requestAccounts\") {\n        // handle accounts changing\n        cb = (err, res) => {\n          this._handleAccountsChanged(res.result || [], _payload.method === \"eth_accounts\", isInternal);\n\n          callback(err, res);\n        };\n      } else if (_payload.method === \"wallet_getProviderState\") {\n        this._rpcEngine.handle(payload, cb);\n\n        return;\n      }\n    }\n\n    this.tryPreopenHandle(_payload, cb);\n  }\n\n  send(methodOrPayload, callbackOrArgs) {\n    if (!this._sentWarnings.send) {\n      log.warn(messages.warnings.sendDeprecation);\n      this._sentWarnings.send = true;\n    }\n\n    if (typeof methodOrPayload === \"string\" && (!callbackOrArgs || Array.isArray(callbackOrArgs))) {\n      return new Promise((resolve, reject) => {\n        try {\n          this._rpcRequest({\n            method: methodOrPayload,\n            params: callbackOrArgs\n          }, getRpcPromiseCallback(resolve, reject, false));\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n\n    if (methodOrPayload && typeof methodOrPayload === \"object\" && typeof callbackOrArgs === \"function\") {\n      return this._rpcRequest(methodOrPayload, callbackOrArgs);\n    }\n\n    return this._sendSync(methodOrPayload);\n  }\n  /**\n   * DEPRECATED.\n   * Internal backwards compatibility method, used in send.\n   */\n\n\n  _sendSync(payload) {\n    let result;\n\n    switch (payload.method) {\n      case \"eth_accounts\":\n        result = this.selectedAddress ? [this.selectedAddress] : [];\n        break;\n\n      case \"eth_coinbase\":\n        result = this.selectedAddress || null;\n        break;\n\n      case \"eth_uninstallFilter\":\n        this._rpcRequest(payload, NOOP);\n\n        result = true;\n        break;\n\n      case \"net_version\":\n        result = this.networkVersion || null;\n        break;\n\n      default:\n        throw new Error(messages.errors.unsupportedSync(payload.method));\n    }\n\n    return {\n      id: payload.id,\n      jsonrpc: payload.jsonrpc,\n      result\n    };\n  }\n  /**\n   * When the provider becomes connected, updates internal state and emits\n   * required events. Idempotent.\n   *\n   * @param chainId - The ID of the newly connected chain.\n   * emits MetaMaskInpageProvider#connect\n   */\n\n\n  _handleConnect(chainId) {\n    if (!this._state.isConnected) {\n      this._state.isConnected = true;\n      this.emit(\"connect\", {\n        chainId\n      });\n      log.debug(messages.info.connected(chainId));\n    }\n  }\n  /**\n   * When the provider becomes disconnected, updates internal state and emits\n   * required events. Idempotent with respect to the isRecoverable parameter.\n   *\n   * Error codes per the CloseEvent status codes as required by EIP-1193:\n   * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n   *\n   * @param isRecoverable - Whether the disconnection is recoverable.\n   * @param errorMessage - A custom error message.\n   * emits MetaMaskInpageProvider#disconnect\n   */\n\n\n  _handleDisconnect(isRecoverable, errorMessage) {\n    if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n      this._state.isConnected = false;\n      let error;\n\n      if (isRecoverable) {\n        error = new EthereumRpcError(1013, // Try again later\n        errorMessage || messages.errors.disconnected());\n        log.debug(error);\n      } else {\n        error = new EthereumRpcError(1011, // Internal error\n        errorMessage || messages.errors.permanentlyDisconnected());\n        log.error(error);\n        this.chainId = null;\n        this._state.accounts = null;\n        this.selectedAddress = null;\n        this._state.isUnlocked = false;\n        this._state.isPermanentlyDisconnected = true;\n      }\n\n      this.emit(\"disconnect\", error);\n    }\n  }\n  /**\n   * Called when connection is lost to critical streams.\n   *\n   * emits MetamaskInpageProvider#disconnect\n   */\n\n\n  _handleStreamDisconnect(streamName, error) {\n    logStreamDisconnectWarning(streamName, error, this);\n\n    this._handleDisconnect(false, error ? error.message : undefined);\n  }\n  /**\n   * Called when accounts may have changed.\n   */\n\n\n  _handleAccountsChanged(accounts) {\n    let isEthAccounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    // defensive programming\n    let finalAccounts = accounts;\n\n    if (!Array.isArray(finalAccounts)) {\n      log.error(\"MetaMask: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n      finalAccounts = [];\n    }\n\n    for (const account of accounts) {\n      if (typeof account !== \"string\") {\n        log.error(\"MetaMask: Received non-string account. Please report this bug.\", accounts);\n        finalAccounts = [];\n        break;\n      }\n    } // emit accountsChanged if anything about the accounts array has changed\n\n\n    if (!dequal(this._state.accounts, finalAccounts)) {\n      // we should always have the correct accounts even before eth_accounts\n      // returns, except in cases where isInternal is true\n      if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n        log.error('MetaMask: \"eth_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n      }\n\n      this._state.accounts = finalAccounts;\n      this.emit(\"accountsChanged\", finalAccounts);\n    } // handle selectedAddress\n\n\n    if (this.selectedAddress !== finalAccounts[0]) {\n      this.selectedAddress = finalAccounts[0] || null;\n    }\n  }\n  /**\n   * Upon receipt of a new chainId and networkVersion, emits corresponding\n   * events and sets relevant public state.\n   * Does nothing if neither the chainId nor the networkVersion are different\n   * from existing values.\n   *\n   * emits MetamaskInpageProvider#chainChanged\n   * @param networkInfo - An object with network info.\n   */\n\n\n  _handleChainChanged() {\n    let {\n      chainId,\n      networkVersion\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!chainId || !networkVersion) {\n      log.error(\"MetaMask: Received invalid network parameters. Please report this bug.\", {\n        chainId,\n        networkVersion\n      });\n      return;\n    }\n\n    if (networkVersion === \"loading\") {\n      this._handleDisconnect(true);\n    } else {\n      this._handleConnect(chainId);\n\n      if (chainId !== this.chainId) {\n        this.chainId = chainId;\n\n        if (this._state.initialized) {\n          this.emit(\"chainChanged\", this.chainId);\n        }\n      }\n    }\n  }\n  /**\n   * Upon receipt of a new isUnlocked state, sets relevant public state.\n   * Calls the accounts changed handler with the received accounts, or an empty\n   * array.\n   *\n   * Does nothing if the received value is equal to the existing value.\n   * There are no lock/unlock events.\n   *\n   * @param opts - Options bag.\n   */\n\n\n  _handleUnlockStateChanged() {\n    let {\n      accounts,\n      isUnlocked\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (typeof isUnlocked !== \"boolean\") {\n      log.error(\"MetaMask: Received invalid isUnlocked parameter. Please report this bug.\", {\n        isUnlocked\n      });\n      return;\n    }\n\n    if (isUnlocked !== this._state.isUnlocked) {\n      this._state.isUnlocked = isUnlocked;\n\n      this._handleAccountsChanged(accounts || []);\n    }\n  }\n  /**\n   * Warns of deprecation for the given event, if applicable.\n   */\n\n\n  _warnOfDeprecation(eventName) {\n    if (this._sentWarnings.events[eventName] === false) {\n      log.warn(messages.warnings.events[eventName]);\n      this._sentWarnings.events[eventName] = true;\n    }\n  }\n\n}\n\n_defineProperty(TorusInpageProvider, \"_defaultState\", {\n  accounts: null,\n  isConnected: false,\n  isUnlocked: false,\n  initialized: false,\n  isPermanentlyDisconnected: false,\n  hasEmittedConnection: false\n});\n\nconst defaults = options => ({\n  algorithms: options.algorithms || [\"sha256\"],\n  delimiter: options.delimiter || \" \",\n  full: options.full || false\n}); // Generate list of hashes\n\n\nconst hashes = (options, data) => {\n  const internalHashes = {};\n  options.algorithms.forEach(algorithm => {\n    internalHashes[algorithm] = createHash(algorithm).update(data, \"utf8\").digest(\"base64\");\n  });\n  return internalHashes;\n}; // Build an integrity string\n\n\nconst integrity = (options, sri) => {\n  let output = \"\"; // Hash list\n\n  output += Object.keys(sri.hashes).map(algorithm => \"\".concat(algorithm, \"-\").concat(sri.hashes[algorithm])).join(options.delimiter);\n  return output;\n};\n\nconst main = (options, data) => {\n  // Defaults\n  const finalOptions = defaults(options);\n  const sri = {\n    hashes: hashes(finalOptions, data),\n    integrity: undefined\n  };\n  sri.integrity = integrity(finalOptions, sri);\n  return finalOptions.full ? sri : sri.integrity;\n};\n\nclass PopupHandler extends EventEmitter {\n  constructor(_ref) {\n    let {\n      url,\n      target,\n      features\n    } = _ref;\n    super();\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"features\", void 0);\n\n    _defineProperty(this, \"window\", void 0);\n\n    _defineProperty(this, \"windowTimer\", void 0);\n\n    _defineProperty(this, \"iClosedWindow\", void 0);\n\n    this.url = url;\n    this.target = target || \"_blank\";\n    this.features = features || getPopupFeatures();\n    this.window = undefined;\n    this.windowTimer = undefined;\n    this.iClosedWindow = false;\n\n    this._setupTimer();\n  }\n\n  _setupTimer() {\n    this.windowTimer = Number(setInterval(() => {\n      if (this.window && this.window.closed) {\n        clearInterval(this.windowTimer);\n\n        if (!this.iClosedWindow) {\n          this.emit(\"close\");\n        }\n\n        this.iClosedWindow = false;\n        this.window = undefined;\n      }\n\n      if (this.window === undefined) clearInterval(this.windowTimer);\n    }, 500));\n  }\n\n  open() {\n    var _this$window;\n\n    this.window = window.open(this.url.href, this.target, this.features);\n    if ((_this$window = this.window) !== null && _this$window !== void 0 && _this$window.focus) this.window.focus();\n    return Promise.resolve();\n  }\n\n  close() {\n    this.iClosedWindow = true;\n    if (this.window) this.window.close();\n  }\n\n  redirect(locationReplaceOnRedirect) {\n    if (locationReplaceOnRedirect) {\n      window.location.replace(this.url.href);\n    } else {\n      window.location.href = this.url.href;\n    }\n  }\n\n}\n\n/**\n * Returns whether the given image URL exists\n * @param url - the url of the image\n * @returns - whether the image exists\n */\n\nfunction imgExists(url) {\n  return new Promise((resolve, reject) => {\n    try {\n      const img = document.createElement(\"img\");\n\n      img.onload = () => resolve(true);\n\n      img.onerror = () => resolve(false);\n\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n/**\n * Extracts a name for the site from the DOM\n */\n\n\nconst getSiteName = window => {\n  const {\n    document\n  } = window;\n  const siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n\n  if (siteName) {\n    return siteName.content;\n  }\n\n  const metaTitle = document.querySelector('head > meta[name=\"title\"]');\n\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n\n  return window.location.hostname;\n};\n/**\n * Extracts an icon for the site from the DOM\n */\n\n\nasync function getSiteIcon(window) {\n  const {\n    document\n  } = window; // Use the site's favicon if it exists\n\n  let icon = document.querySelector('head > link[rel=\"shortcut icon\"]');\n\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  } // Search through available icons in no particular order\n\n\n  icon = Array.from(document.querySelectorAll('head > link[rel=\"icon\"]')).find(_icon => Boolean(_icon.href));\n\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  }\n\n  return null;\n}\n/**\n * Gets site metadata and returns it\n *\n */\n\n\nconst getSiteMetadata = async () => ({\n  name: getSiteName(window),\n  icon: await getSiteIcon(window)\n});\n/**\n * Sends site metadata over an RPC request.\n */\n\n\nasync function sendSiteMetadata(engine) {\n  try {\n    const domainMetadata = await getSiteMetadata(); // call engine.handle directly to avoid normal RPC request handling\n\n    engine.handle({\n      jsonrpc: \"2.0\",\n      id: getPreopenInstanceId(),\n      method: \"wallet_sendDomainMetadata\",\n      params: domainMetadata\n    }, NOOP);\n  } catch (error) {\n    log.error({\n      message: messages.errors.sendSiteMetadata(),\n      originalError: error\n    });\n  }\n}\n\nconst _excluded = [\"host\", \"chainId\", \"networkName\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst defaultVerifiers = {\n  [LOGIN_PROVIDER.GOOGLE]: true,\n  [LOGIN_PROVIDER.FACEBOOK]: true,\n  [LOGIN_PROVIDER.REDDIT]: true,\n  [LOGIN_PROVIDER.TWITCH]: true,\n  [LOGIN_PROVIDER.DISCORD]: true\n};\nconst iframeIntegrity = \"sha384-ChK4+k0VRMpAaC+psywsJYq0CnEqytZvQuy7L2cRWEwqImd7CA7Ep69YzBmHBR2V\";\nconst expectedCacheControlHeader = \"max-age=3600\";\nconst UNSAFE_METHODS = [\"eth_sendTransaction\", \"eth_signTypedData\", \"eth_signTypedData_v3\", \"eth_signTypedData_v4\", \"personal_sign\", \"eth_getEncryptionPublicKey\", \"eth_decrypt\"];\nconst isLocalStorageAvailable = storageAvailable(\"localStorage\"); // preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n\n(async function preLoadIframe() {\n  try {\n    if (typeof document === \"undefined\") return;\n    const torusIframeHtml = document.createElement(\"link\");\n    const {\n      torusUrl\n    } = await getTorusUrl(\"production\", {\n      check: false,\n      hash: iframeIntegrity,\n      version: \"\"\n    });\n    torusIframeHtml.href = \"\".concat(torusUrl, \"/popup\");\n    torusIframeHtml.crossOrigin = \"anonymous\";\n    torusIframeHtml.type = \"text/html\";\n    torusIframeHtml.rel = \"prefetch\";\n\n    if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n      if (torusIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(torusIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.warn(error);\n  }\n})();\n\nclass Torus {\n  constructor() {\n    let {\n      buttonPosition = BUTTON_POSITION.BOTTOM_LEFT,\n      modalZIndex = 99999,\n      apiKey = \"torus-default\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _defineProperty(this, \"buttonPosition\", BUTTON_POSITION.BOTTOM_LEFT);\n\n    _defineProperty(this, \"torusUrl\", void 0);\n\n    _defineProperty(this, \"torusIframe\", void 0);\n\n    _defineProperty(this, \"styleLink\", void 0);\n\n    _defineProperty(this, \"isLoggedIn\", void 0);\n\n    _defineProperty(this, \"isInitialized\", void 0);\n\n    _defineProperty(this, \"torusWidgetVisibility\", void 0);\n\n    _defineProperty(this, \"torusAlert\", void 0);\n\n    _defineProperty(this, \"nodeDetailManager\", void 0);\n\n    _defineProperty(this, \"torusJs\", void 0);\n\n    _defineProperty(this, \"apiKey\", void 0);\n\n    _defineProperty(this, \"modalZIndex\", void 0);\n\n    _defineProperty(this, \"alertZIndex\", void 0);\n\n    _defineProperty(this, \"torusAlertContainer\", void 0);\n\n    _defineProperty(this, \"isIframeFullScreen\", void 0);\n\n    _defineProperty(this, \"whiteLabel\", void 0);\n\n    _defineProperty(this, \"requestedVerifier\", void 0);\n\n    _defineProperty(this, \"currentVerifier\", void 0);\n\n    _defineProperty(this, \"embedTranslations\", void 0);\n\n    _defineProperty(this, \"ethereum\", void 0);\n\n    _defineProperty(this, \"provider\", void 0);\n\n    _defineProperty(this, \"communicationMux\", void 0);\n\n    _defineProperty(this, \"isLoginCallback\", void 0);\n\n    _defineProperty(this, \"dappStorageKey\", void 0);\n\n    _defineProperty(this, \"paymentProviders\", configuration.paymentProviders);\n\n    _defineProperty(this, \"loginHint\", \"\");\n\n    this.buttonPosition = buttonPosition;\n    this.torusUrl = \"\";\n    this.isLoggedIn = false; // ethereum.enable working\n\n    this.isInitialized = false; // init done\n\n    this.torusWidgetVisibility = true;\n    this.requestedVerifier = \"\";\n    this.currentVerifier = \"\";\n    this.nodeDetailManager = new NodeDetailManager();\n    this.torusJs = new TorusJs({\n      metadataHost: \"https://metadata.tor.us\",\n      allowHost: \"https://signer.tor.us/api/allow\"\n    });\n    this.apiKey = apiKey;\n    TorusJs.setAPIKey(apiKey);\n    setAPIKey(apiKey);\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.isIframeFullScreen = false;\n    this.dappStorageKey = \"\";\n  }\n\n  async init() {\n    let {\n      buildEnv = TORUS_BUILD_ENV.PRODUCTION,\n      enableLogging = false,\n      // deprecated: use loginConfig instead\n      enabledVerifiers = defaultVerifiers,\n      network = {\n        host: \"mainnet\",\n        chainId: null,\n        networkName: \"\",\n        blockExplorer: \"\",\n        ticker: \"\",\n        tickerName: \"\"\n      },\n      loginConfig = {},\n      showTorusButton = true,\n      integrity = {\n        check: false,\n        hash: iframeIntegrity,\n        version: \"\"\n      },\n      whiteLabel,\n      skipTKey = false,\n      useLocalStorage = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (this.isInitialized) throw new Error(\"Already initialized\");\n    const {\n      torusUrl,\n      logLevel\n    } = await getTorusUrl(buildEnv, integrity);\n    log.info(torusUrl, \"url loaded\");\n    this.torusUrl = torusUrl;\n    this.whiteLabel = whiteLabel;\n    log.setDefaultLevel(logLevel);\n    if (enableLogging) log.enableAll();else log.disableAll();\n    this.torusWidgetVisibility = showTorusButton;\n    let dappStorageKey = \"\";\n\n    if (isLocalStorageAvailable && useLocalStorage) {\n      const storedKey = window.localStorage.getItem(configuration.localStorageKey);\n      if (storedKey) dappStorageKey = storedKey;else {\n        const generatedKey = \"torus-app-\".concat(getPreopenInstanceId());\n        window.localStorage.setItem(configuration.localStorageKey, generatedKey);\n        dappStorageKey = generatedKey;\n      }\n    }\n\n    this.dappStorageKey = dappStorageKey;\n    const torusIframeUrl = new URL(torusUrl);\n    if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"popup\";else torusIframeUrl.pathname += \"/popup\";\n\n    if (dappStorageKey) {\n      torusIframeUrl.hash = \"#dappStorageKey=\".concat(dappStorageKey);\n    } // Iframe code\n\n\n    this.torusIframe = htmlToElement(\"<iframe\\n        id=\\\"torusIframe\\\"\\n        class=\\\"torusIframe\\\"\\n        src=\\\"\".concat(torusIframeUrl.href, \"\\\"\\n        style=\\\"display: none; position: fixed; top: 0; right: 0; width: 100%;\\n        height: 100%; border: none; border-radius: 0; z-index: \").concat(this.modalZIndex, \"\\\"\\n      ></iframe>\"));\n    this.torusAlertContainer = htmlToElement('<div id=\"torusAlertContainer\"></div>');\n    this.torusAlertContainer.style.display = \"none\";\n    this.torusAlertContainer.style.setProperty(\"z-index\", this.alertZIndex.toString());\n    const link = window.document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    link.setAttribute(\"type\", \"text/css\");\n    link.setAttribute(\"href\", \"\".concat(torusUrl, \"/css/widget.css\"));\n    this.styleLink = link;\n    const {\n      defaultLanguage = getUserLanguage(),\n      customTranslations = {}\n    } = this.whiteLabel || {};\n    const mergedTranslations = deepmerge(configuration.translations, customTranslations);\n    const languageTranslations = mergedTranslations[defaultLanguage] || configuration.translations[getUserLanguage()];\n    this.embedTranslations = languageTranslations.embed;\n\n    const handleSetup = async () => {\n      await documentReady();\n      return new Promise((resolve, reject) => {\n        this.torusIframe.onload = async () => {\n          // only do this if iframe is not full screen\n          this._setupWeb3();\n\n          const initStream = this.communicationMux.getStream(\"init_stream\");\n          initStream.on(\"data\", chunk => {\n            const {\n              name,\n              data,\n              error\n            } = chunk;\n\n            if (name === \"init_complete\" && data.success) {\n              // resolve promise\n              this.isInitialized = true;\n\n              this._displayIframe(this.isIframeFullScreen);\n\n              resolve(undefined);\n            } else if (error) {\n              reject(new Error(error));\n            }\n          });\n          initStream.write({\n            name: \"init_stream\",\n            data: {\n              enabledVerifiers,\n              loginConfig,\n              whiteLabel: this.whiteLabel,\n              buttonPosition: this.buttonPosition,\n              torusWidgetVisibility: this.torusWidgetVisibility,\n              apiKey: this.apiKey,\n              skipTKey,\n              network\n            }\n          });\n        };\n\n        window.document.head.appendChild(this.styleLink);\n        window.document.body.appendChild(this.torusIframe);\n        window.document.body.appendChild(this.torusAlertContainer);\n      });\n    };\n\n    if (buildEnv === \"production\" && integrity.check) {\n      // hacky solution to check for iframe integrity\n      const fetchUrl = \"\".concat(torusUrl, \"/popup\");\n      const resp = await fetch(fetchUrl, {\n        cache: \"reload\"\n      });\n\n      if (resp.headers.get(\"Cache-Control\") !== expectedCacheControlHeader) {\n        throw new Error(\"Unexpected Cache-Control headers, got \".concat(resp.headers.get(\"Cache-Control\")));\n      }\n\n      const response = await resp.text();\n      const calculatedIntegrity = main({\n        algorithms: [\"sha384\"]\n      }, response);\n      log.info(calculatedIntegrity, \"integrity\");\n\n      if (calculatedIntegrity === integrity.hash) {\n        await handleSetup();\n      } else {\n        this.clearInit();\n        throw new Error(\"Integrity check failed\");\n      }\n    } else {\n      await handleSetup();\n    }\n\n    return undefined;\n  }\n\n  login() {\n    let {\n      verifier = \"\",\n      login_hint: loginHint = \"\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!this.isInitialized) throw new Error(\"Call init() first\");\n    this.requestedVerifier = verifier;\n    this.loginHint = loginHint;\n    return this.ethereum.enable();\n  }\n\n  logout() {\n    return new Promise((resolve, reject) => {\n      if (!this.isLoggedIn) {\n        reject(new Error(\"User has not logged in yet\"));\n        return;\n      }\n\n      const logOutStream = this.communicationMux.getStream(\"logout\");\n      logOutStream.write({\n        name: \"logOut\"\n      });\n      const statusStream = this.communicationMux.getStream(\"status\");\n\n      const statusStreamHandler = status => {\n        if (!status.loggedIn) {\n          this.isLoggedIn = false;\n          this.currentVerifier = \"\";\n          this.requestedVerifier = \"\";\n          resolve();\n        } else reject(new Error(\"Some Error Occured\"));\n      };\n\n      handleStream(statusStream, \"data\", statusStreamHandler);\n    });\n  }\n\n  async cleanUp() {\n    if (this.isLoggedIn) {\n      await this.logout();\n    }\n\n    this.clearInit();\n  }\n\n  clearInit() {\n    function isElement(element) {\n      return element instanceof Element || element instanceof HTMLDocument;\n    }\n\n    if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n      this.styleLink.remove();\n      this.styleLink = undefined;\n    }\n\n    if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n      this.torusIframe.remove();\n      this.torusIframe = undefined;\n    }\n\n    if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n      this.torusAlert = undefined;\n      this.torusAlertContainer.remove();\n      this.torusAlertContainer = undefined;\n    }\n\n    this.isInitialized = false;\n  }\n\n  hideTorusButton() {\n    this.torusWidgetVisibility = false;\n\n    this._sendWidgetVisibilityStatus(false);\n\n    this._displayIframe();\n  }\n\n  showTorusButton() {\n    this.torusWidgetVisibility = true;\n\n    this._sendWidgetVisibilityStatus(true);\n\n    this._displayIframe();\n  }\n\n  setProvider() {\n    let _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    let {\n      host = \"mainnet\",\n      chainId = null,\n      networkName = \"\"\n    } = _ref,\n        rest = _objectWithoutProperties(_ref, _excluded);\n\n    return new Promise((resolve, reject) => {\n      const providerChangeStream = this.communicationMux.getStream(\"provider_change\");\n\n      const handler = chunk => {\n        const {\n          err,\n          success\n        } = chunk.data;\n        log.info(chunk);\n\n        if (err) {\n          reject(err);\n        } else if (success) {\n          resolve();\n        } else reject(new Error(\"some error occured\"));\n      };\n\n      handleStream(providerChangeStream, \"data\", handler);\n      const preopenInstanceId = getPreopenInstanceId();\n\n      this._handleWindow(preopenInstanceId, {\n        target: \"_blank\",\n        features: FEATURES_PROVIDER_CHANGE_WINDOW\n      });\n\n      providerChangeStream.write({\n        name: \"show_provider_change\",\n        data: {\n          network: _objectSpread({\n            host,\n            chainId,\n            networkName\n          }, rest),\n          preopenInstanceId,\n          override: false\n        }\n      });\n    });\n  }\n\n  showWallet(path) {\n    let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const showWalletStream = this.communicationMux.getStream(\"show_wallet\");\n    const finalPath = path ? \"/\".concat(path) : \"\";\n    showWalletStream.write({\n      name: \"show_wallet\",\n      data: {\n        path: finalPath\n      }\n    });\n\n    const showWalletHandler = chunk => {\n      if (chunk.name === \"show_wallet_instance\") {\n        // Let the error propogate up (hence, no try catch)\n        const {\n          instanceId\n        } = chunk.data;\n        const finalUrl = new URL(\"\".concat(this.torusUrl, \"/wallet\").concat(finalPath)); // Using URL constructor to prevent js injection and allow parameter validation.!\n\n        finalUrl.searchParams.append(\"integrity\", \"true\");\n        finalUrl.searchParams.append(\"instanceId\", instanceId);\n        Object.keys(params).forEach(x => {\n          finalUrl.searchParams.append(x, params[x]);\n        });\n\n        if (this.dappStorageKey) {\n          finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n        }\n\n        const walletWindow = new PopupHandler({\n          url: finalUrl,\n          features: FEATURES_DEFAULT_WALLET_WINDOW\n        });\n        walletWindow.open();\n      }\n    };\n\n    handleStream(showWalletStream, \"data\", showWalletHandler);\n  }\n\n  async getPublicAddress(_ref2) {\n    let {\n      verifier,\n      verifierId,\n      isExtended = false\n    } = _ref2;\n    if (!configuration.supportedVerifierList.includes(verifier) || !WALLET_OPENLOGIN_VERIFIER_MAP[verifier]) throw new Error(\"Unsupported verifier\");\n    const nodeDetails = await this.nodeDetailManager.getNodeDetails(false, true);\n    const endpoints = nodeDetails.torusNodeEndpoints;\n    const torusNodePubs = nodeDetails.torusNodePub;\n    const walletVerifier = verifier;\n    const openloginVerifier = WALLET_OPENLOGIN_VERIFIER_MAP[verifier];\n\n    try {\n      const existingV1User = await this.torusJs.getUserTypeAndAddress(endpoints, torusNodePubs, {\n        verifier: walletVerifier,\n        verifierId\n      });\n\n      if (existingV1User.typeOfUser === \"v1\") {\n        if (!isExtended) return existingV1User.address;\n        return existingV1User;\n      } // we don't support v2 users with v1 verifiers so get or assign the key for v2 user on v2 `verifier`\n\n\n      const v2User = await this.torusJs.getUserTypeAndAddress(endpoints, torusNodePubs, {\n        verifier: openloginVerifier,\n        verifierId\n      }, true);\n      if (!isExtended) return v2User.address;\n      return v2User;\n    } catch (error) {\n      if (error !== null && error !== void 0 && error.message.includes(\"Verifier + VerifierID has not yet been assigned\")) {\n        // if user doesn't have key then assign it with v2 verifier\n        const newV2User = await this.torusJs.getUserTypeAndAddress(endpoints, torusNodePubs, {\n          verifier: openloginVerifier,\n          verifierId\n        }, true);\n        if (!isExtended) return newV2User.address;\n        return newV2User;\n      }\n\n      throw error;\n    }\n  }\n\n  getUserInfo(message) {\n    return new Promise((resolve, reject) => {\n      if (this.isLoggedIn) {\n        const userInfoAccessStream = this.communicationMux.getStream(\"user_info_access\");\n        userInfoAccessStream.write({\n          name: \"user_info_access_request\"\n        });\n\n        const userInfoAccessHandler = chunk => {\n          const {\n            name,\n            data: {\n              approved,\n              payload,\n              rejected,\n              newRequest\n            }\n          } = chunk;\n\n          if (name === \"user_info_access_response\") {\n            if (approved) {\n              resolve(payload);\n            } else if (rejected) {\n              reject(new Error(\"User rejected the request\"));\n            } else if (newRequest) {\n              const userInfoStream = this.communicationMux.getStream(\"user_info\");\n\n              const userInfoHandler = handlerChunk => {\n                if (handlerChunk.name === \"user_info_response\") {\n                  if (handlerChunk.data.approved) {\n                    resolve(handlerChunk.data.payload);\n                  } else {\n                    reject(new Error(\"User rejected the request\"));\n                  }\n                }\n              };\n\n              handleStream(userInfoStream, \"data\", userInfoHandler);\n              const preopenInstanceId = getPreopenInstanceId();\n\n              this._handleWindow(preopenInstanceId, {\n                target: \"_blank\",\n                features: FEATURES_PROVIDER_CHANGE_WINDOW\n              });\n\n              userInfoStream.write({\n                name: \"user_info_request\",\n                data: {\n                  message,\n                  preopenInstanceId\n                }\n              });\n            }\n          }\n        };\n\n        handleStream(userInfoAccessStream, \"data\", userInfoAccessHandler);\n      } else reject(new Error(\"User has not logged in yet\"));\n    });\n  }\n\n  initiateTopup(provider, params) {\n    return new Promise((resolve, reject) => {\n      if (this.isInitialized) {\n        const {\n          errors,\n          isValid\n        } = validatePaymentProvider(provider, params);\n\n        if (!isValid) {\n          reject(new Error(JSON.stringify(errors)));\n          return;\n        }\n\n        const topupStream = this.communicationMux.getStream(\"topup\");\n\n        const topupHandler = chunk => {\n          if (chunk.name === \"topup_response\") {\n            if (chunk.data.success) {\n              resolve(chunk.data.success);\n            } else {\n              reject(new Error(chunk.data.error));\n            }\n          }\n        };\n\n        handleStream(topupStream, \"data\", topupHandler);\n        const preopenInstanceId = getPreopenInstanceId();\n\n        this._handleWindow(preopenInstanceId);\n\n        topupStream.write({\n          name: \"topup_request\",\n          data: {\n            provider,\n            params,\n            preopenInstanceId\n          }\n        });\n      } else reject(new Error(\"Torus is not initialized yet\"));\n    });\n  }\n\n  _handleWindow(preopenInstanceId) {\n    let {\n      url,\n      target,\n      features\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (preopenInstanceId) {\n      const windowStream = this.communicationMux.getStream(\"window\");\n      const finalUrl = new URL(url || \"\".concat(this.torusUrl, \"/redirect?preopenInstanceId=\").concat(preopenInstanceId));\n\n      if (this.dappStorageKey) {\n        // If multiple instances, it returns the first one\n        if (finalUrl.hash) finalUrl.hash += \"&dappStorageKey=\".concat(this.dappStorageKey);else finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n      }\n\n      const handledWindow = new PopupHandler({\n        url: finalUrl,\n        target,\n        features\n      });\n      handledWindow.open();\n\n      if (!handledWindow.window) {\n        this._createPopupBlockAlert(preopenInstanceId, finalUrl.href);\n\n        return;\n      }\n\n      windowStream.write({\n        name: \"opened_window\",\n        data: {\n          preopenInstanceId\n        }\n      });\n\n      const closeHandler = _ref3 => {\n        let {\n          preopenInstanceId: receivedId,\n          close\n        } = _ref3;\n\n        if (receivedId === preopenInstanceId && close) {\n          handledWindow.close();\n          windowStream.removeListener(\"data\", closeHandler);\n        }\n      };\n\n      windowStream.on(\"data\", closeHandler);\n      handledWindow.once(\"close\", () => {\n        windowStream.write({\n          data: {\n            preopenInstanceId,\n            closed: true\n          }\n        });\n        windowStream.removeListener(\"data\", closeHandler);\n      });\n    }\n  }\n\n  _setEmbedWhiteLabel(element) {\n    // Set whitelabel\n    const {\n      theme\n    } = this.whiteLabel || {};\n\n    if (theme) {\n      const {\n        isDark = false,\n        colors = {}\n      } = theme;\n      if (isDark) element.classList.add(\"torus-dark\");\n      if (colors.torusBrand1) element.style.setProperty(\"--torus-brand-1\", colors.torusBrand1);\n      if (colors.torusGray2) element.style.setProperty(\"--torus-gray-2\", colors.torusGray2);\n    }\n  }\n\n  _getLogoUrl() {\n    var _this$whiteLabel, _this$whiteLabel$them;\n\n    let logoUrl = \"\".concat(this.torusUrl, \"/images/torus_icon-blue.svg\");\n\n    if ((_this$whiteLabel = this.whiteLabel) !== null && _this$whiteLabel !== void 0 && (_this$whiteLabel$them = _this$whiteLabel.theme) !== null && _this$whiteLabel$them !== void 0 && _this$whiteLabel$them.isDark) {\n      var _this$whiteLabel2;\n\n      logoUrl = ((_this$whiteLabel2 = this.whiteLabel) === null || _this$whiteLabel2 === void 0 ? void 0 : _this$whiteLabel2.logoLight) || logoUrl;\n    } else {\n      var _this$whiteLabel3;\n\n      logoUrl = ((_this$whiteLabel3 = this.whiteLabel) === null || _this$whiteLabel3 === void 0 ? void 0 : _this$whiteLabel3.logoDark) || logoUrl;\n    }\n\n    return logoUrl;\n  }\n\n  _sendWidgetVisibilityStatus(status) {\n    const torusWidgetVisibilityStream = this.communicationMux.getStream(\"torus-widget-visibility\");\n    torusWidgetVisibilityStream.write({\n      data: status\n    });\n  }\n\n  _displayIframe() {\n    let isFull = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    const style = {}; // set phase\n\n    if (!isFull) {\n      style.display = this.torusWidgetVisibility ? \"block\" : \"none\";\n      style.height = \"70px\";\n      style.width = \"70px\";\n\n      switch (this.buttonPosition) {\n        case BUTTON_POSITION.TOP_LEFT:\n          style.top = \"0px\";\n          style.left = \"0px\";\n          style.right = \"auto\";\n          style.bottom = \"auto\";\n          break;\n\n        case BUTTON_POSITION.TOP_RIGHT:\n          style.top = \"0px\";\n          style.right = \"0px\";\n          style.left = \"auto\";\n          style.bottom = \"auto\";\n          break;\n\n        case BUTTON_POSITION.BOTTOM_RIGHT:\n          style.bottom = \"0px\";\n          style.right = \"0px\";\n          style.top = \"auto\";\n          style.left = \"auto\";\n          break;\n\n        case BUTTON_POSITION.BOTTOM_LEFT:\n        default:\n          style.bottom = \"0px\";\n          style.left = \"0px\";\n          style.top = \"auto\";\n          style.right = \"auto\";\n          break;\n      }\n    } else {\n      style.display = \"block\";\n      style.width = \"100%\";\n      style.height = \"100%\";\n      style.top = \"0px\";\n      style.right = \"0px\";\n      style.left = \"0px\";\n      style.bottom = \"0px\";\n    }\n\n    Object.assign(this.torusIframe.style, style);\n    this.isIframeFullScreen = isFull;\n  }\n\n  _setupWeb3() {\n    log.info(\"setupWeb3 running\"); // setup background connection\n\n    const metamaskStream = new BasePostMessageStream({\n      name: \"embed_metamask\",\n      target: \"iframe_metamask\",\n      targetWindow: this.torusIframe.contentWindow,\n      targetOrigin: new URL(this.torusUrl).origin\n    }); // Due to compatibility reasons, we should not set up multiplexing on window.metamaskstream\n    // because the MetamaskInpageProvider also attempts to do so.\n    // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n\n    const communicationStream = new BasePostMessageStream({\n      name: \"embed_comm\",\n      target: \"iframe_comm\",\n      targetWindow: this.torusIframe.contentWindow,\n      targetOrigin: new URL(this.torusUrl).origin\n    }); // Backward compatibility with Gotchi :)\n    // window.metamaskStream = this.communicationStream\n    // compose the inpage provider\n\n    const inpageProvider = new TorusInpageProvider(metamaskStream); // detect eth_requestAccounts and pipe to enable for now\n\n    const detectAccountRequestPrototypeModifier = m => {\n      const originalMethod = inpageProvider[m];\n\n      inpageProvider[m] = function providerFunc(method) {\n        if (method && method === \"eth_requestAccounts\") {\n          return inpageProvider.enable();\n        }\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        return originalMethod.apply(this, [method, ...args]);\n      };\n    };\n\n    detectAccountRequestPrototypeModifier(\"send\");\n    detectAccountRequestPrototypeModifier(\"sendAsync\");\n\n    inpageProvider.enable = () => {\n      return new Promise((resolve, reject) => {\n        // If user is already logged in, we assume they have given access to the website\n        inpageProvider.sendAsync({\n          jsonrpc: \"2.0\",\n          id: getPreopenInstanceId(),\n          method: \"eth_requestAccounts\",\n          params: []\n        }, (err, response) => {\n          const {\n            result: res\n          } = response || {};\n\n          if (err) {\n            setTimeout(() => {\n              reject(err);\n            }, 50);\n          } else if (Array.isArray(res) && res.length > 0) {\n            // If user is already rehydrated, resolve this\n            // else wait for something to be written to status stream\n            const handleLoginCb = () => {\n              if (this.requestedVerifier !== \"\" && this.currentVerifier !== this.requestedVerifier) {\n                const {\n                  requestedVerifier\n                } = this; // eslint-disable-next-line promise/no-promise-in-callback\n\n                this.logout() // eslint-disable-next-line promise/always-return\n                .then(_ => {\n                  this.requestedVerifier = requestedVerifier;\n\n                  this._showLoginPopup(true, resolve, reject);\n                }).catch(error => reject(error));\n              } else {\n                resolve(res);\n              }\n            };\n\n            if (this.isLoggedIn) {\n              handleLoginCb();\n            } else {\n              this.isLoginCallback = handleLoginCb;\n            }\n          } else {\n            // set up listener for login\n            this._showLoginPopup(true, resolve, reject);\n          }\n        });\n      });\n    };\n\n    inpageProvider.tryPreopenHandle = (payload, cb) => {\n      const _payload = payload;\n\n      if (!Array.isArray(_payload) && UNSAFE_METHODS.includes(_payload.method)) {\n        const preopenInstanceId = getPreopenInstanceId();\n\n        this._handleWindow(preopenInstanceId, {\n          target: \"_blank\",\n          features: FEATURES_CONFIRM_WINDOW\n        });\n\n        _payload.preopenInstanceId = preopenInstanceId;\n      }\n\n      inpageProvider._rpcEngine.handle(_payload, cb);\n    }; // Work around for web3@1.0 deleting the bound `sendAsync` but not the unbound\n    // `sendAsync` method on the prototype, causing `this` reference issues with drizzle\n\n\n    const proxiedInpageProvider = new Proxy(inpageProvider, {\n      // straight up lie that we deleted the property so that it doesnt\n      // throw an error in strict mode\n      deleteProperty: () => true\n    });\n    this.ethereum = proxiedInpageProvider;\n    const communicationMux = setupMultiplex(communicationStream);\n    this.communicationMux = communicationMux;\n    const windowStream = communicationMux.getStream(\"window\");\n    windowStream.on(\"data\", chunk => {\n      if (chunk.name === \"create_window\") {\n        // url is the url we need to open\n        // we can pass the final url upfront so that it removes the step of redirecting to /redirect and waiting for finalUrl\n        this._createPopupBlockAlert(chunk.data.preopenInstanceId, chunk.data.url);\n      }\n    }); // show torus widget if button clicked\n\n    const widgetStream = communicationMux.getStream(\"widget\");\n    widgetStream.on(\"data\", chunk => {\n      const {\n        data\n      } = chunk;\n\n      this._displayIframe(data);\n    }); // Show torus button if wallet has been hydrated/detected\n\n    const statusStream = communicationMux.getStream(\"status\");\n    statusStream.on(\"data\", status => {\n      // login\n      if (status.loggedIn) {\n        this.isLoggedIn = status.loggedIn;\n        this.currentVerifier = status.verifier;\n      } // logout\n      else this._displayIframe();\n\n      if (this.isLoginCallback) {\n        this.isLoginCallback();\n        delete this.isLoginCallback;\n      }\n    });\n    this.provider = proxiedInpageProvider;\n    if (this.provider.shouldSendMetadata) sendSiteMetadata(this.provider._rpcEngine);\n\n    inpageProvider._initializeState();\n\n    log.debug(\"Torus - injected provider\");\n  }\n\n  _showLoginPopup(calledFromEmbed, resolve, reject) {\n    const loginHandler = data => {\n      const {\n        err,\n        selectedAddress\n      } = data;\n\n      if (err) {\n        log.error(err);\n        if (reject) reject(err);\n      } // returns an array (cause accounts expects it)\n      else if (resolve) resolve([selectedAddress]);\n\n      if (this.isIframeFullScreen) this._displayIframe();\n    };\n\n    const oauthStream = this.communicationMux.getStream(\"oauth\");\n\n    if (!this.requestedVerifier) {\n      this._displayIframe(true);\n\n      handleStream(oauthStream, \"data\", loginHandler);\n      oauthStream.write({\n        name: \"oauth_modal\",\n        data: {\n          calledFromEmbed\n        }\n      });\n    } else {\n      handleStream(oauthStream, \"data\", loginHandler);\n      const preopenInstanceId = getPreopenInstanceId();\n\n      this._handleWindow(preopenInstanceId);\n\n      oauthStream.write({\n        name: \"oauth\",\n        data: {\n          calledFromEmbed,\n          verifier: this.requestedVerifier,\n          preopenInstanceId,\n          login_hint: this.loginHint\n        }\n      });\n    }\n  }\n\n  _createPopupBlockAlert(preopenInstanceId, url) {\n    const logoUrl = this._getLogoUrl();\n\n    const torusAlert = htmlToElement('<div id=\"torusAlert\" class=\"torus-alert--v2\">' + \"<div id=\\\"torusAlert__logo\\\"><img src=\\\"\".concat(logoUrl, \"\\\" /></div>\") + \"<div>\" + \"<h1 id=\\\"torusAlert__title\\\">\".concat(this.embedTranslations.actionRequired, \"</h1>\") + \"<p id=\\\"torusAlert__desc\\\">\".concat(this.embedTranslations.pendingAction, \"</p>\") + \"</div>\" + \"</div>\");\n    const successAlert = htmlToElement(\"<div><a id=\\\"torusAlert__btn\\\">\".concat(this.embedTranslations.continue, \"</a></div>\"));\n    const btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n    btnContainer.appendChild(successAlert);\n    torusAlert.appendChild(btnContainer);\n\n    const bindOnLoad = () => {\n      successAlert.addEventListener(\"click\", () => {\n        this._handleWindow(preopenInstanceId, {\n          url,\n          target: \"_blank\",\n          features: FEATURES_CONFIRM_WINDOW\n        });\n\n        torusAlert.remove();\n        if (this.torusAlertContainer.children.length === 0) this.torusAlertContainer.style.display = \"none\";\n      });\n    };\n\n    this._setEmbedWhiteLabel(torusAlert);\n\n    const attachOnLoad = () => {\n      this.torusAlertContainer.style.display = \"block\";\n      this.torusAlertContainer.appendChild(torusAlert);\n    };\n\n    runOnLoad(attachOnLoad);\n    runOnLoad(bindOnLoad);\n  }\n\n}\n\nexport { BUTTON_POSITION, LOGIN_PROVIDER, PAYMENT_PROVIDER, TORUS_BUILD_ENV, TorusInpageProvider, WALLET_OPENLOGIN_VERIFIER_MAP, Torus as default };\n//# sourceMappingURL=torus.esm.js.map\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport Torus from '@toruslabs/torus-embed';\nimport { BaseAdapter, WALLET_ADAPTERS, ADAPTER_NAMESPACES, CHAIN_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, getChainConfig, ADAPTER_EVENTS, WalletInitializationError, Web3AuthError, WalletLoginError } from '@web3auth/base';\nimport log from 'loglevel';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nclass TorusWalletAdapter extends BaseAdapter {\n  constructor() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n\n    _defineProperty(this, \"name\", WALLET_ADAPTERS.TORUS_EVM);\n\n    _defineProperty(this, \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(this, \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(this, \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(this, \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(this, \"torusInstance\", null);\n\n    _defineProperty(this, \"torusWalletOptions\", void 0);\n\n    _defineProperty(this, \"initParams\", void 0);\n\n    _defineProperty(this, \"loginSettings\", {});\n\n    _defineProperty(this, \"rehydrated\", false);\n\n    this.torusWalletOptions = params.adapterSettings || {};\n    this.initParams = params.initParams || {};\n    this.loginSettings = params.loginSettings || {};\n    this.chainConfig = params.chainConfig || null;\n  }\n\n  get provider() {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.torusInstance) {\n      return this.torusInstance.provider;\n    }\n\n    return null;\n  }\n\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init(options) {\n    super.checkInitializationRequirements(); // set chainConfig for mainnet by default if not set\n\n    let network;\n\n    if (!this.chainConfig) {\n      this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n      const {\n        blockExplorer,\n        displayName\n      } = this.chainConfig;\n      network = {\n        chainId: 1,\n        host: \"mainnet\",\n        blockExplorer,\n        networkName: displayName\n      };\n    } else {\n      const {\n        chainId,\n        blockExplorer,\n        displayName,\n        rpcTarget\n      } = this.chainConfig;\n      network = {\n        chainId: parseInt(chainId, 16),\n        host: rpcTarget,\n        blockExplorer,\n        networkName: displayName\n      };\n    }\n\n    this.torusInstance = new Torus(this.torusWalletOptions);\n    await this.torusInstance.init(_objectSpread(_objectSpread({\n      showTorusButton: false\n    }, this.initParams), {}, {\n      network\n    }));\n    this.status = ADAPTER_STATUS.READY;\n    this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.TORUS_EVM);\n\n    try {\n      if (options.autoConnect) {\n        this.rehydrated = true;\n        await this.connect();\n      }\n    } catch (error) {\n      log.error(\"Failed to connect with torus evm provider\", error);\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n    }\n  }\n\n  async connect() {\n    super.checkConnectionRequirements();\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    this.status = ADAPTER_STATUS.CONNECTING;\n    this.emit(ADAPTER_EVENTS.CONNECTING, {\n      adapter: WALLET_ADAPTERS.TORUS_EVM\n    });\n\n    try {\n      await this.torusInstance.login(this.loginSettings);\n      const {\n        chainId\n      } = this.torusInstance.provider;\n\n      if (chainId && parseInt(chainId) !== parseInt(this.chainConfig.chainId, 16)) {\n        throw WalletInitializationError.fromCode(5000, \"Not connected to correct chainId. Expected: \".concat(this.chainConfig.chainId, \", Current: \").concat(chainId));\n      }\n\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.torusInstance.showTorusButton();\n      this.emit(ADAPTER_STATUS.CONNECTED, {\n        adapter: WALLET_ADAPTERS.TORUS_EVM,\n        reconnected: this.rehydrated\n      });\n      return this.provider;\n    } catch (error) {\n      // ready again to be connected\n      this.status = ADAPTER_STATUS.READY;\n      this.rehydrated = false;\n      this.emit(ADAPTER_STATUS.ERRORED, error);\n      throw error instanceof Web3AuthError ? error : WalletLoginError.connectionError(\"Failed to login with torus wallet\");\n    }\n  }\n\n  async disconnect() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      cleanup: false\n    };\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    await this.torusInstance.logout();\n    this.torusInstance.hideTorusButton();\n\n    if (options.cleanup) {\n      this.status = ADAPTER_STATUS.NOT_READY;\n      this.torusInstance = null;\n    } else {\n      // ready to be connected again\n      this.status = ADAPTER_STATUS.READY;\n    }\n\n    this.rehydrated = false;\n    this.emit(ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async getUserInfo() {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    const userInfo = await this.torusInstance.getUserInfo(\"\");\n    return userInfo;\n  }\n\n  setAdapterSettings(_) {}\n\n}\n\nexport { TorusWalletAdapter };\n//# sourceMappingURL=torusEvmAdapter.esm.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getMessageFromCode = exports.serializeError = exports.EthereumProviderError = exports.EthereumRpcError = exports.ethErrors = exports.errorCodes = void 0;\nconst classes_1 = require(\"./classes\");\nObject.defineProperty(exports, \"EthereumRpcError\", { enumerable: true, get: function () { return classes_1.EthereumRpcError; } });\nObject.defineProperty(exports, \"EthereumProviderError\", { enumerable: true, get: function () { return classes_1.EthereumProviderError; } });\nconst utils_1 = require(\"./utils\");\nObject.defineProperty(exports, \"serializeError\", { enumerable: true, get: function () { return utils_1.serializeError; } });\nObject.defineProperty(exports, \"getMessageFromCode\", { enumerable: true, get: function () { return utils_1.getMessageFromCode; } });\nconst errors_1 = require(\"./errors\");\nObject.defineProperty(exports, \"ethErrors\", { enumerable: true, get: function () { return errors_1.ethErrors; } });\nconst error_constants_1 = require(\"./error-constants\");\nObject.defineProperty(exports, \"errorCodes\", { enumerable: true, get: function () { return error_constants_1.errorCodes; } });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsdUNBQW9FO0FBVWxFLGlHQVZPLDBCQUFnQixPQVVQO0FBQ2hCLHNHQVh5QiwrQkFBcUIsT0FXekI7QUFWdkIsbUNBRWlCO0FBU2YsK0ZBVkEsc0JBQWMsT0FVQTtBQUNkLG1HQVhnQiwwQkFBa0IsT0FXaEI7QUFUcEIscUNBQXFDO0FBS25DLDBGQUxPLGtCQUFTLE9BS1A7QUFKWCx1REFBK0M7QUFHN0MsMkZBSE8sNEJBQVUsT0FHUCJ9","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./asStream\"), exports);\n__exportStar(require(\"./ComposedStore\"), exports);\n__exportStar(require(\"./MergedStore\"), exports);\n__exportStar(require(\"./ObservableStore\"), exports);\n__exportStar(require(\"./transform\"), exports);\n//# sourceMappingURL=index.js.map","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeFunction = require(\"./isNativeFunction.js\");\n\nvar construct = require(\"./construct.js\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","module.exports = require(\"regenerator-runtime\");\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it\nvar fails = require('../internals/fails');\n\nmodule.exports = fails(function () {\n  if (typeof ArrayBuffer == 'function') {\n    var buffer = new ArrayBuffer(8);\n    // eslint-disable-next-line es/no-object-isextensible, es/no-object-defineproperty -- safe\n    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });\n  }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.errorValues = exports.errorCodes = void 0;\nexports.errorCodes = {\n    rpc: {\n        invalidInput: -32000,\n        resourceNotFound: -32001,\n        resourceUnavailable: -32002,\n        transactionRejected: -32003,\n        methodNotSupported: -32004,\n        limitExceeded: -32005,\n        parse: -32700,\n        invalidRequest: -32600,\n        methodNotFound: -32601,\n        invalidParams: -32602,\n        internal: -32603,\n    },\n    provider: {\n        userRejectedRequest: 4001,\n        unauthorized: 4100,\n        unsupportedMethod: 4200,\n        disconnected: 4900,\n        chainDisconnected: 4901,\n    },\n};\nexports.errorValues = {\n    '-32700': {\n        standard: 'JSON RPC 2.0',\n        message: 'Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text.',\n    },\n    '-32600': {\n        standard: 'JSON RPC 2.0',\n        message: 'The JSON sent is not a valid Request object.',\n    },\n    '-32601': {\n        standard: 'JSON RPC 2.0',\n        message: 'The method does not exist / is not available.',\n    },\n    '-32602': {\n        standard: 'JSON RPC 2.0',\n        message: 'Invalid method parameter(s).',\n    },\n    '-32603': {\n        standard: 'JSON RPC 2.0',\n        message: 'Internal JSON-RPC error.',\n    },\n    '-32000': {\n        standard: 'EIP-1474',\n        message: 'Invalid input.',\n    },\n    '-32001': {\n        standard: 'EIP-1474',\n        message: 'Resource not found.',\n    },\n    '-32002': {\n        standard: 'EIP-1474',\n        message: 'Resource unavailable.',\n    },\n    '-32003': {\n        standard: 'EIP-1474',\n        message: 'Transaction rejected.',\n    },\n    '-32004': {\n        standard: 'EIP-1474',\n        message: 'Method not supported.',\n    },\n    '-32005': {\n        standard: 'EIP-1474',\n        message: 'Request limit exceeded.',\n    },\n    '4001': {\n        standard: 'EIP-1193',\n        message: 'User rejected the request.',\n    },\n    '4100': {\n        standard: 'EIP-1193',\n        message: 'The requested account and/or method has not been authorized by the user.',\n    },\n    '4200': {\n        standard: 'EIP-1193',\n        message: 'The requested method is not supported by this Ethereum provider.',\n    },\n    '4900': {\n        standard: 'EIP-1193',\n        message: 'The provider is disconnected from all chains.',\n    },\n    '4901': {\n        standard: 'EIP-1193',\n        message: 'The provider is disconnected from the specified chain.',\n    },\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3ItY29uc3RhbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2Vycm9yLWNvbnN0YW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUF1QmEsUUFBQSxVQUFVLEdBQWU7SUFDcEMsR0FBRyxFQUFFO1FBQ0gsWUFBWSxFQUFFLENBQUMsS0FBSztRQUNwQixnQkFBZ0IsRUFBRSxDQUFDLEtBQUs7UUFDeEIsbUJBQW1CLEVBQUUsQ0FBQyxLQUFLO1FBQzNCLG1CQUFtQixFQUFFLENBQUMsS0FBSztRQUMzQixrQkFBa0IsRUFBRSxDQUFDLEtBQUs7UUFDMUIsYUFBYSxFQUFFLENBQUMsS0FBSztRQUNyQixLQUFLLEVBQUUsQ0FBQyxLQUFLO1FBQ2IsY0FBYyxFQUFFLENBQUMsS0FBSztRQUN0QixjQUFjLEVBQUUsQ0FBQyxLQUFLO1FBQ3RCLGFBQWEsRUFBRSxDQUFDLEtBQUs7UUFDckIsUUFBUSxFQUFFLENBQUMsS0FBSztLQUNqQjtJQUNELFFBQVEsRUFBRTtRQUNSLG1CQUFtQixFQUFFLElBQUk7UUFDekIsWUFBWSxFQUFFLElBQUk7UUFDbEIsaUJBQWlCLEVBQUUsSUFBSTtRQUN2QixZQUFZLEVBQUUsSUFBSTtRQUNsQixpQkFBaUIsRUFBRSxJQUFJO0tBQ3hCO0NBQ0YsQ0FBQztBQUVXLFFBQUEsV0FBVyxHQUFHO0lBQ3pCLFFBQVEsRUFBRTtRQUNSLFFBQVEsRUFBRSxjQUFjO1FBQ3hCLE9BQU8sRUFBRSx1R0FBdUc7S0FDakg7SUFDRCxRQUFRLEVBQUU7UUFDUixRQUFRLEVBQUUsY0FBYztRQUN4QixPQUFPLEVBQUUsOENBQThDO0tBQ3hEO0lBQ0QsUUFBUSxFQUFFO1FBQ1IsUUFBUSxFQUFFLGNBQWM7UUFDeEIsT0FBTyxFQUFFLCtDQUErQztLQUN6RDtJQUNELFFBQVEsRUFBRTtRQUNSLFFBQVEsRUFBRSxjQUFjO1FBQ3hCLE9BQU8sRUFBRSw4QkFBOEI7S0FDeEM7SUFDRCxRQUFRLEVBQUU7UUFDUixRQUFRLEVBQUUsY0FBYztRQUN4QixPQUFPLEVBQUUsMEJBQTBCO0tBQ3BDO0lBQ0QsUUFBUSxFQUFFO1FBQ1IsUUFBUSxFQUFFLFVBQVU7UUFDcEIsT0FBTyxFQUFFLGdCQUFnQjtLQUMxQjtJQUNELFFBQVEsRUFBRTtRQUNSLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLE9BQU8sRUFBRSxxQkFBcUI7S0FDL0I7SUFDRCxRQUFRLEVBQUU7UUFDUixRQUFRLEVBQUUsVUFBVTtRQUNwQixPQUFPLEVBQUUsdUJBQXVCO0tBQ2pDO0lBQ0QsUUFBUSxFQUFFO1FBQ1IsUUFBUSxFQUFFLFVBQVU7UUFDcEIsT0FBTyxFQUFFLHVCQUF1QjtLQUNqQztJQUNELFFBQVEsRUFBRTtRQUNSLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLE9BQU8sRUFBRSx1QkFBdUI7S0FDakM7SUFDRCxRQUFRLEVBQUU7UUFDUixRQUFRLEVBQUUsVUFBVTtRQUNwQixPQUFPLEVBQUUseUJBQXlCO0tBQ25DO0lBQ0QsTUFBTSxFQUFFO1FBQ04sUUFBUSxFQUFFLFVBQVU7UUFDcEIsT0FBTyxFQUFFLDRCQUE0QjtLQUN0QztJQUNELE1BQU0sRUFBRTtRQUNOLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLE9BQU8sRUFBRSwwRUFBMEU7S0FDcEY7SUFDRCxNQUFNLEVBQUU7UUFDTixRQUFRLEVBQUUsVUFBVTtRQUNwQixPQUFPLEVBQUUsa0VBQWtFO0tBQzVFO0lBQ0QsTUFBTSxFQUFFO1FBQ04sUUFBUSxFQUFFLFVBQVU7UUFDcEIsT0FBTyxFQUFFLCtDQUErQztLQUN6RDtJQUNELE1BQU0sRUFBRTtRQUNOLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLE9BQU8sRUFBRSx3REFBd0Q7S0FDbEU7Q0FDRixDQUFDIn0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EthereumProviderError = exports.EthereumRpcError = void 0;\nconst fast_safe_stringify_1 = require(\"fast-safe-stringify\");\n/**\n * Error subclass implementing JSON RPC 2.0 errors and Ethereum RPC errors\n * per EIP-1474.\n * Permits any integer error code.\n */\nclass EthereumRpcError extends Error {\n    constructor(code, message, data) {\n        if (!Number.isInteger(code)) {\n            throw new Error('\"code\" must be an integer.');\n        }\n        if (!message || typeof message !== 'string') {\n            throw new Error('\"message\" must be a nonempty string.');\n        }\n        super(message);\n        this.code = code;\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n    /**\n     * Returns a plain object with all public class properties.\n     */\n    serialize() {\n        const serialized = {\n            code: this.code,\n            message: this.message,\n        };\n        if (this.data !== undefined) {\n            serialized.data = this.data;\n        }\n        if (this.stack) {\n            serialized.stack = this.stack;\n        }\n        return serialized;\n    }\n    /**\n     * Return a string representation of the serialized error, omitting\n     * any circular references.\n     */\n    toString() {\n        return fast_safe_stringify_1.default(this.serialize(), stringifyReplacer, 2);\n    }\n}\nexports.EthereumRpcError = EthereumRpcError;\n/**\n * Error subclass implementing Ethereum Provider errors per EIP-1193.\n * Permits integer error codes in the [ 1000 <= 4999 ] range.\n */\nclass EthereumProviderError extends EthereumRpcError {\n    /**\n     * Create an Ethereum Provider JSON-RPC error.\n     * `code` must be an integer in the 1000 <= 4999 range.\n     */\n    constructor(code, message, data) {\n        if (!isValidEthProviderCode(code)) {\n            throw new Error('\"code\" must be an integer such that: 1000 <= code <= 4999');\n        }\n        super(code, message, data);\n    }\n}\nexports.EthereumProviderError = EthereumProviderError;\n// Internal\nfunction isValidEthProviderCode(code) {\n    return Number.isInteger(code) && code >= 1000 && code <= 4999;\n}\nfunction stringifyReplacer(_, value) {\n    if (value === '[Circular]') {\n        return undefined;\n    }\n    return value;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xhc3Nlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9jbGFzc2VzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDZEQUFnRDtBQVNoRDs7OztHQUlHO0FBQ0gsTUFBYSxnQkFBb0IsU0FBUSxLQUFLO0lBTTVDLFlBQVksSUFBWSxFQUFFLE9BQWUsRUFBRSxJQUFRO1FBRWpELElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzNCLE1BQU0sSUFBSSxLQUFLLENBQ2IsNEJBQTRCLENBQzdCLENBQUM7U0FDSDtRQUNELElBQUksQ0FBQyxPQUFPLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFO1lBQzNDLE1BQU0sSUFBSSxLQUFLLENBQ2Isc0NBQXNDLENBQ3ZDLENBQUM7U0FDSDtRQUVELEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtZQUN0QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNsQjtJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILFNBQVM7UUFDUCxNQUFNLFVBQVUsR0FBK0I7WUFDN0MsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1lBQ2YsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1NBQ3RCLENBQUM7UUFDRixJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQzNCLFVBQVUsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztTQUM3QjtRQUNELElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNkLFVBQVUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztTQUMvQjtRQUNELE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxRQUFRO1FBQ04sT0FBTyw2QkFBYSxDQUNsQixJQUFJLENBQUMsU0FBUyxFQUFFLEVBQ2hCLGlCQUFpQixFQUNqQixDQUFDLENBQ0YsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQXRERCw0Q0FzREM7QUFFRDs7O0dBR0c7QUFDSCxNQUFhLHFCQUF5QixTQUFRLGdCQUFtQjtJQUUvRDs7O09BR0c7SUFDSCxZQUFZLElBQVksRUFBRSxPQUFlLEVBQUUsSUFBUTtRQUVqRCxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDakMsTUFBTSxJQUFJLEtBQUssQ0FDYiwyREFBMkQsQ0FDNUQsQ0FBQztTQUNIO1FBRUQsS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztDQUNGO0FBaEJELHNEQWdCQztBQUVELFdBQVc7QUFFWCxTQUFTLHNCQUFzQixDQUFDLElBQVk7SUFDMUMsT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQztBQUNoRSxDQUFDO0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxDQUFVLEVBQUUsS0FBYztJQUNuRCxJQUFJLEtBQUssS0FBSyxZQUFZLEVBQUU7UUFDMUIsT0FBTyxTQUFTLENBQUM7S0FDbEI7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMifQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MergedStore = void 0;\nconst ObservableStore_1 = require(\"./ObservableStore\");\nclass MergedStore extends ObservableStore_1.ObservableStore {\n    constructor(children = []) {\n        // Typecast: Preserve existing behavior\n        super({});\n        this._children = children;\n        // subscribe to children\n        children.forEach((child) => this._addChild(child));\n        this._updateWholeState();\n    }\n    _addChild(child) {\n        child.subscribe(() => this._updateWholeState());\n    }\n    _updateWholeState() {\n        const childStates = this._children.map((child) => child.getState());\n        // apply shallow merge over states\n        const state = Object.assign({}, ...childStates);\n        this.putState(state);\n    }\n}\nexports.MergedStore = MergedStore;\n//# sourceMappingURL=MergedStore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.storeAsStream = void 0;\nconst stream_1 = require(\"stream\");\nclass ObservableStoreStream extends stream_1.Duplex {\n    constructor(obsStore) {\n        super({\n            // pass values, not serializations\n            objectMode: true,\n        });\n        // dont buffer outgoing updates\n        this.resume();\n        // save handler so we can unsubscribe later\n        this.handler = (state) => this.push(state);\n        // subscribe to obsStore changes\n        this.obsStore = obsStore;\n        this.obsStore.subscribe(this.handler);\n    }\n    // emit current state on new destination\n    pipe(dest, options) {\n        const result = super.pipe(dest, options);\n        dest.write(this.obsStore.getState());\n        return result;\n    }\n    // write from incoming stream to state\n    _write(chunk, _encoding, callback) {\n        this.obsStore.putState(chunk);\n        callback();\n    }\n    // noop - outgoing stream is asking us if we have data we arent giving it\n    _read(_size) {\n        return undefined;\n    }\n    // unsubscribe from event emitter\n    _destroy(err, callback) {\n        this.obsStore.unsubscribe(this.handler);\n        super._destroy(err, callback);\n    }\n}\nfunction storeAsStream(obsStore) {\n    return new ObservableStoreStream(obsStore);\n}\nexports.storeAsStream = storeAsStream;\n//# sourceMappingURL=asStream.js.map","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternalModule = require('../internals/object-get-own-property-names-external');\nvar isExtensible = require('../internals/object-is-extensible');\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar REQUIRED = false;\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + id++, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar enable = function () {\n  meta.enable = function () { /* empty */ };\n  REQUIRED = true;\n  var getOwnPropertyNames = getOwnPropertyNamesModule.f;\n  var splice = uncurryThis([].splice);\n  var test = {};\n  test[METADATA] = 1;\n\n  // prevent exposing of metadata key\n  if (getOwnPropertyNames(test).length) {\n    getOwnPropertyNamesModule.f = function (it) {\n      var result = getOwnPropertyNames(it);\n      for (var i = 0, length = result.length; i < length; i++) {\n        if (result[i] === METADATA) {\n          splice(result, i, 1);\n          break;\n        }\n      } return result;\n    };\n\n    $({ target: 'Object', stat: true, forced: true }, {\n      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f\n    });\n  }\n};\n\nvar meta = module.exports = {\n  enable: enable,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.storeTransformStream = void 0;\nconst through2_1 = require(\"through2\");\nfunction storeTransformStream(syncTransformFn) {\n    return through2_1.obj((state, _encoding, cb) => {\n        try {\n            const newState = syncTransformFn(state);\n            cb(null, newState);\n            return undefined;\n        }\n        catch (err) {\n            cb(err);\n            return undefined;\n        }\n    });\n}\nexports.storeTransformStream = storeTransformStream;\n//# sourceMappingURL=transform.js.map","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar un$Slice = require('../internals/array-slice');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = lengthOfArrayLike(O);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return un$Slice(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ComposedStore = void 0;\nconst ObservableStore_1 = require(\"./ObservableStore\");\nclass ComposedStore extends ObservableStore_1.ObservableStore {\n    constructor(children) {\n        // Typecast: Preserve existing behavior\n        super({});\n        // subscribe to children\n        this._children = children || {};\n        Object.keys(this._children).forEach((childKey) => {\n            const child = this._children[childKey];\n            this._addChild(childKey, child);\n        });\n    }\n    _addChild(childKey, child) {\n        const updateFromChild = (childValue) => {\n            const state = this.getState();\n            state[childKey] = childValue;\n            this.putState(state);\n        };\n        child.subscribe(updateFromChild);\n        updateFromChild(child.getState());\n    }\n}\nexports.ComposedStore = ComposedStore;\n//# sourceMappingURL=ComposedStore.js.map"],"sourceRoot":""}